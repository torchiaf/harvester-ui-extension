(("undefined"!==typeof self?self:this)["webpackChunkharvester_1_0_1"]=("undefined"!==typeof self?self:this)["webpackChunkharvester_1_0_1"]||[]).push([[332],{38076:function(e,t,a){"use strict";a.d(t,{A:function(){return d}});var s=a(9274);function r(e,t,a,r,l,o){return a.text?((0,s.openBlock)(),(0,s.createElementBlock)("a",{key:0,class:(0,s.normalizeClass)(["copy-to-clipboard-text",{copied:l.copied,plain:a.plain}]),href:"#",onClick:t[0]||(t[0]=(...e)=>o.clicked&&o.clicked(...e))},[(0,s.createTextVNode)((0,s.toDisplayString)(a.text)+" ",1),(0,s.createElementVNode)("i",{class:(0,s.normalizeClass)(["icon",{"icon-copy":!l.copied,"icon-checkmark":l.copied}])},null,2)],2)):(0,s.createCommentVNode)("",!0)}var l=a(48881),o=a(99726),n={emits:["error"],props:{text:{type:String,required:!0},plain:{type:Boolean,default:!1}},data(){return{copied:!1}},methods:{clicked(e){this.copied||(e.preventDefault(),(0,l.e)(this.text).then((()=>{this.copied=!0;let t=e.target;"I"===t.tagName&&(t=t.parentElement||t),setTimeout((()=>{this.copied=!1}),500)})).catch((e=>{this.$emit("error",(0,o.rz)(e))})))}}},c=(a(48734),a(47433));const i=(0,c.A)(n,[["render",r],["__scopeId","data-v-d8c131ea"]]);var d=i},65268:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Na}});var s=a(9274);const r={key:1},l={key:0,class:"row mb-20"},o={class:"col span-12"},n={class:"mt-5"};function c(e,t,a,c,i,d){const u=(0,s.resolveComponent)("Loading"),m=(0,s.resolveComponent)("Banner"),v=(0,s.resolveComponent)("Basic"),p=(0,s.resolveComponent)("Tab"),h=(0,s.resolveComponent)("Instance"),k=(0,s.resolveComponent)("VlanStatus"),b=(0,s.resolveComponent)("InfoBox"),y=(0,s.resolveComponent)("Tag"),g=(0,s.resolveComponent)("LabelValue"),N=(0,s.resolveComponent)("Disk"),V=(0,s.resolveComponent)("ArrayListGrouped"),f=(0,s.resolveComponent)("HarvesterKsmtuned"),w=(0,s.resolveComponent)("HarvesterSeeder"),C=(0,s.resolveComponent)("SortableTable"),E=(0,s.resolveComponent)("Tabbed"),S=(0,s.resolveDirective)("clean-html");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0})):((0,s.openBlock)(),(0,s.createElementBlock)("div",r,["disabled"===d.ntpSyncedStatus.status?((0,s.openBlock)(),(0,s.createBlock)(m,{key:0,color:"warning"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("span",null,null,512),[[S,e.t(d.ntpSyncedStatus.warning.key)]])])),_:1})):(0,s.createCommentVNode)("",!0),"unsynced"===d.ntpSyncedStatus.status?((0,s.openBlock)(),(0,s.createBlock)(m,{key:1,color:"warning"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("span",null,null,512),[[S,e.t(d.ntpSyncedStatus.warning.key,{current:d.ntpSyncedStatus.warning.current},!0)]])])),_:1})):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(E,(0,s.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0,onChanged:d.tabChange}),{default:(0,s.withCtx)((()=>[(0,s.createVNode)(p,{name:"basics",label:e.t("harvester.host.tabs.basics"),weight:4,class:"bordered-table"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(v,{value:a.value,metrics:i.metrics,mode:i.mode},null,8,["value","metrics","mode"])])),_:1},8,["label"]),(0,s.createVNode)(p,{name:"instance",label:e.t("harvester.host.tabs.instance"),weight:3,class:"bordered-table"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(h,{node:a.value},null,8,["node"])])),_:1},8,["label"]),d.hasHostNetworksSchema&&d.vlanStatuses.length>0?((0,s.openBlock)(),(0,s.createBlock)(p,{key:0,name:"network",label:e.t("harvester.host.tabs.network"),weight:2,class:"bordered-table"},{default:(0,s.withCtx)((()=>[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(d.vlanStatuses,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)(b,{key:t},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(k,{value:e,mode:i.mode},null,8,["value","mode"])])),_:2},1024)))),128))])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),d.hasBlockDevicesSchema?((0,s.openBlock)(),(0,s.createBlock)(p,{key:1,name:"disk",weight:1,label:e.t("harvester.host.tabs.storage")},{default:(0,s.withCtx)((()=>[d.longhornNode?((0,s.openBlock)(),(0,s.createElementBlock)("div",l,[(0,s.createElementVNode)("div",o,[d.longhornNode.spec.tags.length?((0,s.openBlock)(),(0,s.createBlock)(g,{key:0,name:e.t("harvester.host.tags.label")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",n,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(d.longhornNode.spec.tags,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)(y,{key:t},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e),1)])),_:2},1024)))),128))])])),_:1},8,["name"])):(0,s.createCommentVNode)("",!0)])])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(V,{value:i.newDisks,"onUpdate:value":t[0]||(t[0]=e=>i.newDisks=e),mode:i.mode,"can-remove":!1,"initial-empty-row":!1},{default:(0,s.withCtx)((e=>[(0,s.createVNode)(N,{value:e.row.value,"onUpdate:value":t=>e.row.value=t,class:"mb-20",mode:i.mode,disks:i.disks},null,8,["value","onUpdate:value","mode","disks"])])),_:1},8,["value","mode"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),d.hasKsmtunedSchema?((0,s.openBlock)(),(0,s.createBlock)(p,{key:2,name:"ksmtuned",weight:0,"show-header":!1,label:e.t("harvester.host.tabs.ksmtuned")},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(f,{mode:i.mode,node:a.value},null,8,["mode","node"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),d.seederEnabled?((0,s.openBlock)(),(0,s.createBlock)(p,{key:3,name:"seeder",weight:-1,label:e.t("harvester.host.tabs.seeder")},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(w,{mode:i.mode,node:a.value,inventory:i.inventory},null,8,["mode","node","inventory"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(p,{"label-key":"harvester.virtualMachine.detail.tabs.events",name:"events",weight:-99},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(C,{rows:d.events,headers:d.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,"default-sort-by":"date"},null,8,["rows","headers"])])),_:1})])),_:1},16,["onChanged"])]))}var i=a(65359),d=a(8529),u=a(81594),m=a(49584),v=a(26962),p=a(39412),h=a(31097),k=a(84409),b=a(44138),y=a(68023),g=a(52799),N=a(35664),V=a(2602),f=a(88339),w=a(95799),C=a(68851),E=a(76978),S=a(92043),B=a(32766);const A=e=>((0,s.pushScopeId)("data-v-4ba6006f"),e=e(),(0,s.popScopeId)(),e),T={class:"host-detail"},_={class:"row mb-20"},x={class:"col span-6"},M={class:"col span-6"},D={class:"row mb-20"},$={class:"col span-6"},O={class:"col span-6"},R={class:"role"},I={key:0,class:"text-warning ml-20"},L={class:"row mb-20"},P={class:"col span-6"},U={class:"col span-6"},H={class:"row mb-20"},K={key:0,class:"col span-6"},j={class:"col span-6"},F=["href"],q={key:1},J=A((()=>(0,s.createElementVNode)("hr",{class:"divider"},null,-1))),z={class:"row mb-20"},G={key:0,class:"col span-4"},Q=A((()=>(0,s.createElementVNode)("hr",{class:"section-divider"},null,-1))),W={class:"row mb-20"},Y={class:"col span-4"},X={class:"col span-4"},Z={class:"col span-4"},ee={key:2,class:"row mb-20"},te={key:0,class:"col span-4"},ae={key:1,class:"col span-4"},se={key:2,class:"col span-4"};function re(e,t,a,r,l,o){const n=(0,s.resolveComponent)("Banner"),c=(0,s.resolveComponent)("LabelValue"),i=(0,s.resolveComponent)("HarvesterCPUUsed"),d=(0,s.resolveComponent)("HarvesterMemoryUsed"),u=(0,s.resolveComponent)("HarvesterStorageUsed");return(0,s.openBlock)(),(0,s.createElementBlock)("div",T,[a.value.isKVMDisable?((0,s.openBlock)(),(0,s.createBlock)(n,{key:0,color:"error","label-key":"harvester.host.detail.kvm.disableMessage"})):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("h3",null,(0,s.toDisplayString)(e.t("harvester.host.tabs.overview")),1),(0,s.createElementVNode)("div",_,[(0,s.createElementVNode)("div",x,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.customName"),value:o.customName},null,8,["name","value"])]),(0,s.createElementVNode)("div",M,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.hostIP"),value:a.value.internalIp},null,8,["name","value"])])]),(0,s.createElementVNode)("div",D,[(0,s.createElementVNode)("div",$,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.os"),value:a.value.status.nodeInfo.osImage},null,8,["name","value"])]),(0,s.createElementVNode)("div",O,[(0,s.createElementVNode)("div",R,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.role")},{value:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(o.nodeType)+" ",1),o.nodeRoleState?((0,s.openBlock)(),(0,s.createElementBlock)("span",I,(0,s.toDisplayString)(o.nodeRoleState),1)):(0,s.createCommentVNode)("",!0)])),_:1},8,["name"])])])]),(0,s.createElementVNode)("div",L,[(0,s.createElementVNode)("div",P,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.create"),value:a.value.metadata.creationTimestamp},null,8,["name","value"])]),(0,s.createElementVNode)("div",U,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.update"),value:o.lastUpdateTime},null,8,["name","value"])])]),(0,s.createElementVNode)("div",H,[!a.value.isEtcd&&a.value.cpuPinningFeatureEnabled?((0,s.openBlock)(),(0,s.createElementBlock)("div",K,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.cpuManager"),value:o.cpuManagerStatus},null,8,["name","value"])])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("div",j,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.consoleUrl"),value:o.consoleUrl.value},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("a",{slot:"value",href:o.consoleUrl.value,target:"_blank"},(0,s.toDisplayString)(o.consoleUrl.display),9,F)])),_:1},8,["name","value"])])]),o.hasMetricNodeSchema?((0,s.openBlock)(),(0,s.createElementBlock)("div",q,[J,(0,s.createElementVNode)("h3",null,(0,s.toDisplayString)(e.t("harvester.host.tabs.monitor")),1),(0,s.createElementVNode)("div",z,[(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(["col",{"span-4":o.hasLonghornSchema,"span-6":!o.hasLonghornSchema}])},[(0,s.createVNode)(i,{row:a.value,"resource-name":e.t("node.detail.glance.consumptionGauge.cpu"),"show-used":!0},null,8,["row","resource-name"])],2),(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)(["col",{"span-4":o.hasLonghornSchema,"span-6":!o.hasLonghornSchema}])},[(0,s.createVNode)(d,{row:a.value,"resource-name":e.t("node.detail.glance.consumptionGauge.memory"),"show-used":!0},null,8,["row","resource-name"])],2),o.hasLonghornSchema?((0,s.openBlock)(),(0,s.createElementBlock)("div",G,[(0,s.createVNode)(u,{row:a.value,"resource-name":e.t("harvester.host.detail.storage"),"show-allocated":!0},null,8,["row","resource-name"])])):(0,s.createCommentVNode)("",!0)])])):(0,s.createCommentVNode)("",!0),Q,(0,s.createElementVNode)("h3",null,(0,s.toDisplayString)(e.t("harvester.host.detail.more")),1),(0,s.createElementVNode)("div",W,[(0,s.createElementVNode)("div",Y,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.uuid"),value:a.value.status.nodeInfo.systemUUID},null,8,["name","value"])]),(0,s.createElementVNode)("div",X,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.kernel"),value:a.value.status.nodeInfo.kernelVersion},null,8,["name","value"])]),(0,s.createElementVNode)("div",Z,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.containerRuntime"),value:a.value.status.nodeInfo.containerRuntimeVersion},null,8,["name","value"])])]),a.value.manufacturer||a.value.serialNumber||a.value.model?((0,s.openBlock)(),(0,s.createElementBlock)("div",ee,[a.value.manufacturer?((0,s.openBlock)(),(0,s.createElementBlock)("div",te,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.manufacturer"),value:a.value.manufacturer},null,8,["name","value"])])):(0,s.createCommentVNode)("",!0),a.value.serialNumber?((0,s.openBlock)(),(0,s.createElementBlock)("div",ae,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.serialNumber"),value:a.value.serialNumber},null,8,["name","value"])])):(0,s.createCommentVNode)("",!0),a.value.model?((0,s.openBlock)(),(0,s.createElementBlock)("div",se,[(0,s.createVNode)(c,{name:e.t("harvester.host.detail.model"),value:a.value.model},null,8,["name","value"])])):(0,s.createCommentVNode)("",!0)])):(0,s.createCommentVNode)("",!0)])}var le=a(9980),oe=a(14290),ne=a(44599),ce=a(20297);const ie="complete",de="promoteRestart",ue="promoteSucceed";var me={name:"BasicNode",components:{Banner:le.l,LabelValue:p.A,HarvesterCPUUsed:oe["default"],HarvesterMemoryUsed:ne["default"],HarvesterStorageUsed:ce["default"]},props:{value:{type:Object,required:!0},metrics:{type:Object,required:!1,default:()=>null},mode:{type:String,required:!1,default:"view"}},computed:{customName(){return this.value.metadata?.annotations?.[V.r.HOST_CUSTOM_NAME]},cpuManagerStatus(){return this.value.isCPUManagerEnableInProgress?this.t("generic.loading"):this.t("generic."+(this.value.isCPUManagerEnabled?"enabled":"disabled"))},consoleUrl(){const e=this.value.metadata?.annotations?.[V.r.HOST_CONSOLE_URL];let t=e;return e?(e.startsWith("http://")||e.startsWith("https://")||(t=`http://${e}`),{display:e,value:t}):""},cpuTotal(){let e=0;return this.metrics&&(e=this.metrics.cpuCapacity),e},cpuUsage(){let e=0;return this.metrics&&(e=this.metrics.cpuUsage),e},memoryTotal(){let e=0;return this.metrics&&(e=this.metrics.memoryCapacity),e},memoryUsage(){let e=0;return this.metrics&&(e=this.metrics.memoryUsage),e},cpuUnits(){return"C"},memoryUnits(){const e=(0,w.$W)(this.memoryTotal,1024);return`${w.QN[e]}iB`},nodeType(){return this.value.isEtcd?this.t("harvester.host.detail.etcd"):this.value.isMaster?this.t("harvester.host.detail.management"):this.t("harvester.host.detail.compute")},lastUpdateTime(){return this.value.status?.conditions?.[0]?.lastHeartbeatTime},nodeRoleState(){if(!this.value.isEtcd){const e=this.value.metadata?.annotations?.[V.r.PROMOTE_STATUS];if(e===ie){const e=void 0!==this.value.metadata?.labels?.[V.r.NODE_ROLE_MASTER]||void 0!==this.value.metadata?.labels?.[V.r.NODE_ROLE_CONTROL_PLANE];return this.t(`harvester.host.promote.${e?ue:de}`)}}return null},hasMetricNodeSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](N.$v.NODE)},hasLonghornSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](N.oe.NODES)}},methods:{memoryFormatter(e){const t=(0,w.$W)(this.memoryTotal,1024),a={addSuffix:!1,increment:1024,minExponent:t};return(0,w.Mo)(e,a)}}},ve=(a(23857),a(47433));const pe=(0,ve.A)(me,[["render",re],["__scopeId","data-v-4ba6006f"]]);var he=pe;const ke={key:1,id:"host-instances",class:"row"},be={class:"col span-12"},ye={class:"state"};function ge(e,t,a,r,l,o){const n=(0,s.resolveComponent)("Loading"),c=(0,s.resolveComponent)("HarvesterVmState"),i=(0,s.resolveComponent)("SortableTable");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(n,{key:0})):((0,s.openBlock)(),(0,s.createElementBlock)("div",ke,[(0,s.createElementVNode)("div",be,[(0,s.createVNode)(i,(0,s.mergeProps)(e.$attrs,{headers:o.headers,"default-sort-by":"age",rows:l.rows,"key-field":"_key"}),{"cell:state":(0,s.withCtx)((e=>[(0,s.createElementVNode)("div",ye,[(0,s.createVNode)(c,{class:"vmstate",row:e.row,"all-cluster-network":l.allClusterNetwork},null,8,["row","all-cluster-network"])])])),_:1},16,["headers","rows"])])]))}var Ne=a(68774),Ve=a(2841),fe=a(98993),we={name:"InstanceNode",components:{SortableTable:b.A,Loading:k.A,HarvesterVmState:fe["default"]},props:{node:{type:Object,required:!0}},async fetch(){const e=await(0,f.kR)({vms:this.$store.dispatch("harvester/findAll",{type:B.rk.VM}),vmis:this.$store.dispatch("harvester/findAll",{type:B.rk.VMI}),allClusterNetwork:this.$store.dispatch("harvester/findAll",{type:B.rk.CLUSTER_NETWORK})}),t={};(e.vmis||[]).forEach((e=>{const a=e?.metadata?.ownerReferences?.[0]?.uid;a&&(t[a]=e)})),this.allClusterNetwork=e.allClusterNetwork,this.rows=e.vms.filter((e=>t[e.metadata?.uid]?.status?.nodeName===this.node?.metadata?.labels?.[Ve.yA]))},data(){return{rows:[],allClusterNetwork:[]}},computed:{headers(){return[Ne.c4,Ne.o_,{name:"vmCPU",labelKey:"tableHeaders.cpu",search:!1,sort:["spec.template.spec.domain.cpu.cores"],value:"spec.template.spec.domain.cpu.cores",width:120},{name:"vmRAM",labelKey:"glance.memory",search:!1,sort:["memorySort"],value:"spec.template.spec.domain.resources.limits.memory",width:120},{name:"ip",label:"IP Address",labelKey:"harvester.tableHeaders.vm.ipAddress",value:"id",formatter:"HarvesterIpAddress"},{...Ne.K,sort:"metadata.creationTimestamp:desc"}]}},methods:{}};a(49600);const Ce=(0,ve.A)(we,[["render",ge],["__scopeId","data-v-cfda1d06"]]);var Ee=Ce;const Se=e=>((0,s.pushScopeId)("data-v-2f2890f0"),e=e(),(0,s.popScopeId)(),e),Be={key:1},Ae={class:"row"},Te={class:"col span-12"},_e={class:"mt-5"},xe={class:"row mt-10"},Me={class:"col span-12"},De={class:"pull-left"},$e={class:"pull-right"},Oe={key:0,class:"row mt-30"},Re={class:"col span-4"},Ie={class:"col span-4"},Le={class:"col span-4"},Pe=Se((()=>(0,s.createElementVNode)("hr",{class:"mt-10"},null,-1))),Ue={class:"row mt-10"},He={class:"col span-4"},Ke={key:0,class:"col span-4"},je={class:"col span-4"};function Fe(e,t,a,r,l,o){const n=(0,s.resolveComponent)("Banner"),c=(0,s.resolveComponent)("Tag"),i=(0,s.resolveComponent)("LabelValue"),d=(0,s.resolveComponent)("RadioGroup"),u=(0,s.resolveComponent)("BadgeState"),m=(0,s.resolveDirective)("clean-tooltip");return(0,s.openBlock)(),(0,s.createElementBlock)("div",{class:"disk","onUpdate:value":t[1]||(t[1]=(...e)=>o.update&&o.update(...e))},[o.mountedMessage?((0,s.openBlock)(),(0,s.createBlock)(n,{key:0,color:"error",label:o.mountedMessage},null,8,["label"])):(0,s.createCommentVNode)("",!0),a.value.isNew?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("div",Be,[(0,s.createElementVNode)("div",Ae,[(0,s.createElementVNode)("div",Te,[a.value.tags.length?((0,s.openBlock)(),(0,s.createBlock)(i,{key:0,name:e.t("harvester.host.disk.tags.label")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",_e,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.value.tags,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)(c,{key:t},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e),1)])),_:2},1024)))),128))])])),_:1},8,["name"])):(0,s.createCommentVNode)("",!0)])]),(0,s.createElementVNode)("div",xe,[(0,s.createElementVNode)("div",Me,[(0,s.createElementVNode)("div",De,[(0,s.createVNode)(d,{value:a.value.allowScheduling,"onUpdate:value":t[0]||(t[0]=e=>a.value.allowScheduling=e),name:"diskScheduling",label:e.t("harvester.host.disk.allowScheduling.label"),mode:a.mode,options:o.allowSchedulingOptions,row:!0},null,8,["value","label","mode","options"])]),(0,s.createElementVNode)("div",$e,[(0,s.createTextVNode)((0,s.toDisplayString)(e.t("harvester.host.disk.conditions"))+": ",1),(0,s.withDirectives)((0,s.createVNode)(u,{color:"True"===e.readyCondition.status?"bg-success":"bg-error",icon:"True"===e.readyCondition.status?"icon-checkmark":"icon-warning",label:"Ready",class:"mr-10 ml-10 state"},null,8,["color","icon"]),[[m,e.readyCondition.message]]),(0,s.withDirectives)((0,s.createVNode)(u,{color:"True"===e.schedulableCondition.status&&o.targetDisk?.allowScheduling?"bg-success":"bg-error",icon:"True"===e.schedulableCondition.status&&o.targetDisk?.allowScheduling?"icon-checkmark":"icon-warning",label:"Schedulable",class:"mr-10 state"},null,8,["color","icon"]),[[m,o.schedulableTooltipMessage]]),o.provisionPhase.label?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0,color:o.provisionPhase.color,icon:o.provisionPhase.icon,label:o.provisionPhase.label,class:"mr-10 state"},null,8,["color","icon","label"])):(0,s.createCommentVNode)("",!0)])])]),a.value.isNew?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("div",Oe,[(0,s.createElementVNode)("div",Re,[(0,s.createVNode)(i,{name:e.t("harvester.host.disk.storageAvailable.label"),value:a.value.storageAvailable},null,8,["name","value"])]),(0,s.createElementVNode)("div",Ie,[(0,s.createVNode)(i,{name:e.t("harvester.host.disk.storageScheduled.label"),value:a.value.storageScheduled},null,8,["name","value"])]),(0,s.createElementVNode)("div",Le,[(0,s.createVNode)(i,{name:e.t("harvester.host.disk.storageMaximum.label"),value:a.value.storageMaximum},null,8,["name","value"])])])),Pe])),(0,s.createElementVNode)("div",Ue,[(0,s.createElementVNode)("div",He,[(0,s.createVNode)(i,{name:e.t("generic.name"),value:a.value.displayName},null,8,["name","value"])]),a.value.path?((0,s.openBlock)(),(0,s.createElementBlock)("div",Ke,[(0,s.createVNode)(i,{name:e.t("harvester.host.disk.path.label"),value:a.value.path},null,8,["name","value"])])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("div",je,[(0,s.createVNode)(i,{name:e.t("harvester.host.disk.provisioner"),value:o.provisioner},null,8,["name","value"])])])],32)}var qe=a(23005),Je=a(154),ze=a(10196),Ge={emits:["update:value"],components:{LabelValue:p.A,BadgeState:qe.j,Banner:le.l,Tag:d.A,RadioGroup:ze.z},mixins:[Je.A],props:{value:{type:Object,default:()=>({})},disks:{type:Array,default:()=>[]},mode:{type:String,default:"edit"}},data(){return{}},computed:{targetDisk(){return this.disks.find((e=>e.name===this.value.name))},schedulableTooltipMessage(){const{name:e,path:t}=this.value;return this.targetDisk&&!this.targetDisk.allowScheduling&&e&&t?this.t("harvester.host.disk.allowScheduling.tooltip",{name:e,path:t}):this.schedulableCondition.message},allowSchedulingOptions(){return[{label:this.t("generic.enabled"),value:!0},{label:this.t("generic.disabled"),value:!1}]},evictionRequestedOptions(){return[{label:this.t("generic.yes"),value:!0},{label:this.t("generic.no"),value:!1}]},provisionPhase(){return this.value?.blockDevice?.provisionPhase||{}},mountedMessage(){const e=this.value?.blockDevice?.metadata?.state||{};return e?.error?e?.message:""},provisioner(){let e=`harvester.host.disk.storage.longhorn.${N.Zd}.label`;return this.value?.blockDevice?.spec?.provisioner.longhorn&&(e=`harvester.host.disk.storage.longhorn.${this.value.blockDevice.spec.provisioner.longhorn.engineVersion}.label`),this.value?.blockDevice?.spec?.provisioner.lvm&&(e="harvester.host.disk.storage.lvm.label"),this.t(e)}},methods:{update(){this.$emit("update:value",this.value)},canEditPath(e){return!!this.mountedMessage||!(!e.isNew||!e.originPath)}}};a(91810);const Qe=(0,ve.A)(Ge,[["render",Fe],["__scopeId","data-v-2f2890f0"]]);var We=Qe;const Ye={class:"row"},Xe={class:"col span-12"},Ze={class:"pull-right"},et={class:"row mt-10"},tt={class:"col span-6"},at={class:"col span-6"},st={class:"row mt-20"},rt={class:"col span-12"};function lt(e,t,a,r,l,o){const n=(0,s.resolveComponent)("BadgeState"),c=(0,s.resolveComponent)("LabelValue"),i=(0,s.resolveComponent)("LinkStatus"),d=(0,s.resolveComponent)("ArrayListGrouped"),u=(0,s.resolveDirective)("clean-tooltip");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createElementVNode)("div",Ye,[(0,s.createElementVNode)("div",Xe,[(0,s.createElementVNode)("div",Ze,[(0,s.createTextVNode)((0,s.toDisplayString)(e.t("resourceTabs.conditions.tab"))+": ",1),(0,s.withDirectives)((0,s.createVNode)(n,{color:"True"===o.readyCondition.status?"bg-success":"bg-error",icon:"True"===o.readyCondition.status?"icon-checkmark":"icon-warning",label:e.t("tableHeaders.ready"),class:"mr-10 ml-10 state"},null,8,["color","icon","label"]),[[u,o.readyCondition.message]])])])]),(0,s.createElementVNode)("div",et,[(0,s.createElementVNode)("div",tt,[(0,s.createVNode)(c,{name:e.t("harvester.network.clusterNetwork.label"),value:a.value.status.clusterNetwork},null,8,["name","value"])]),(0,s.createElementVNode)("div",at,[(0,s.createVNode)(c,{name:e.t("harvester.vlanStatus.vlanConfig.label"),value:a.value.status.vlanConfig},null,8,["name","value"])])]),(0,s.createElementVNode)("div",st,[(0,s.createElementVNode)("div",rt,[(0,s.createVNode)(d,{value:o.linkStatus,"onUpdate:value":t[0]||(t[0]=e=>o.linkStatus=e),mode:a.mode,"can-remove":!1},{default:(0,s.withCtx)((e=>[(0,s.createVNode)(i,{value:e.row.value,mode:a.mode},null,8,["value","mode"])])),_:1},8,["value","mode"])])])])}var ot=a(14220);const nt={class:"row mt-10"},ct={class:"col span-6"},it={class:"col span-6"},dt={class:"row mt-10"},ut={class:"col span-6"},mt={class:"col span-6"},vt={class:"row mt-10"},pt={key:0,class:"col span-6"};function ht(e,t,a,r,l,o){const n=(0,s.resolveComponent)("LabelValue");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createElementVNode)("div",nt,[(0,s.createElementVNode)("div",ct,[(0,s.createVNode)(n,{name:e.t("generic.name"),value:a.value.name},null,8,["name","value"])]),(0,s.createElementVNode)("div",it,[(0,s.createVNode)(n,{name:e.t("tableHeaders.state"),value:a.value.state},null,8,["name","value"])])]),(0,s.createElementVNode)("div",dt,[(0,s.createElementVNode)("div",ut,[(0,s.createVNode)(n,{name:e.t("tableHeaders.type"),value:a.value.type},null,8,["name","value"])]),(0,s.createElementVNode)("div",mt,[(0,s.createVNode)(n,{name:e.t("harvester.fields.macAddress"),value:a.value.mac},null,8,["name","value"])])]),(0,s.createElementVNode)("div",vt,["true"===a.value.promiscuous?((0,s.openBlock)(),(0,s.createElementBlock)("div",pt,[(0,s.createVNode)(n,{name:e.t("harvester.fields.promiscuous"),value:a.value.promiscuous},{value:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)("true"===a.value.promiscuous?e.t("generic.yes"):e.t("generic.no")),1)])),_:1},8,["name","value"])])):(0,s.createCommentVNode)("",!0)])])}var kt={name:"LinkStatus",components:{LabelValue:p.A},props:{value:{type:Object,required:!0},mode:{type:String,default:ot.YQ}}};const bt=(0,ve.A)(kt,[["render",ht]]);var yt=bt,gt={name:"HarvesterHostNetwork",components:{LabelValue:p.A,LinkStatus:yt,ArrayListGrouped:h.A,BadgeState:qe.j},props:{value:{type:Object,required:!0},mode:{type:String,default:ot.YQ}},computed:{conditions(){return this.value?.status?.conditions||[]},readyCondition(){return(0,C.jq)(this.conditions,"type","ready")||{}},linkStatus(){const e=this.value?.status?.linkMonitor,t=this.value?.status?.node,a=this.$store.getters["currentProduct"].inStore,s=this.$store.getters[`${a}/all`](B.rk.LINK_MONITOR),r=(s.filter((t=>t.id===e))||[])[0]||{};return r?.status?.linkStatus?.[t]||[]}}};const Nt=(0,ve.A)(gt,[["render",lt]]);var Vt=Nt;const ft={class:"row mb-20"},wt={class:"col span-4"},Ct={key:0,class:"row mb-20"},Et={class:"col span-4"},St={class:"col span-4"},Bt={class:"col span-4"},At={key:1},Tt=(0,s.createElementVNode)("hr",{class:"divider"},null,-1),_t={class:"row mb-20"},xt={class:"col span-4"},Mt={class:"col span-4"},Dt={class:"col span-4"},$t={class:"row mb-20"},Ot={class:"col span-4"},Rt={class:"col span-4"},It=(0,s.createElementVNode)("hr",{class:"divider"},null,-1),Lt={class:"row mb-20"},Pt={class:"col span-4"},Ut={class:"col span-4"},Ht={class:"col span-4"},Kt={class:"row mb-20"},jt={class:"col span-4"},Ft={class:"col span-4"},qt={class:"col span-4"},Jt={class:"row mb-20"},zt={class:"col span-4"},Gt={class:"col span-4"};function Qt(e,t,a,r,l,o){const n=(0,s.resolveComponent)("LabelValue"),c=(0,s.resolveComponent)("t");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[l.ksmtuned.status?((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,{key:0},[(0,s.createElementVNode)("h2",null,(0,s.toDisplayString)(e.t("harvester.host.ksmtuned.configure")),1),(0,s.createElementVNode)("div",ft,[(0,s.createElementVNode)("div",wt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.run"),value:o.runText},null,8,["name","value"])])]),o.showRunInformation?((0,s.openBlock)(),(0,s.createElementBlock)("div",Ct,[(0,s.createElementVNode)("div",Et,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.thresCoef"),value:o.thresCoef},null,8,["name","value"])]),(0,s.createElementVNode)("div",St,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.mode"),value:o.modeText},null,8,["name","value"])]),(0,s.createElementVNode)("div",Bt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.enableMergeNodes"),value:o.mergeNodesText},null,8,["name","value"])])])):(0,s.createCommentVNode)("",!0),o.showRunInformation?((0,s.openBlock)(),(0,s.createElementBlock)("div",At,[Tt,(0,s.createElementVNode)("h3",null,(0,s.toDisplayString)(e.t("harvester.host.ksmtuned.parameters.title")),1),(0,s.createElementVNode)("div",_t,[(0,s.createElementVNode)("div",xt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.boost"),value:l.ksmtuned.spec.ksmtunedParameters.boost},null,8,["name","value"])]),(0,s.createElementVNode)("div",Mt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.decay"),value:l.ksmtuned.spec.ksmtunedParameters.decay},null,8,["name","value"])]),(0,s.createElementVNode)("div",Dt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.sleepMsec"),value:l.ksmtuned.spec.ksmtunedParameters.sleepMsec},null,8,["name","value"])])]),(0,s.createElementVNode)("div",$t,[(0,s.createElementVNode)("div",Ot,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.minPages"),value:l.ksmtuned.spec.ksmtunedParameters.minPages},null,8,["name","value"])]),(0,s.createElementVNode)("div",Rt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.parameters.maxPages"),value:l.ksmtuned.spec.ksmtunedParameters.maxPages},null,8,["name","value"])])])])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("div",null,[It,(0,s.createElementVNode)("h3",null,[(0,s.createVNode)(c,{k:"harvester.host.ksmtuned.statistics.title",raw:!0})]),(0,s.createElementVNode)("div",Lt,[(0,s.createElementVNode)("div",Pt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.ksmStatus")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("span",{class:(0,s.normalizeClass)(o.ksmdPhaseTextColor)},(0,s.toDisplayString)(o.ksmdPhase),3)])),_:1},8,["name"])]),(0,s.createElementVNode)("div",Ut,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.sharing"),value:l.ksmtuned.status.sharing},null,8,["name","value"])]),(0,s.createElementVNode)("div",Ht,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.shared"),value:l.ksmtuned.status.shared},null,8,["name","value"])])]),(0,s.createElementVNode)("div",Kt,[(0,s.createElementVNode)("div",jt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.unshared"),value:l.ksmtuned.status.unshared},null,8,["name","value"])]),(0,s.createElementVNode)("div",Ft,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.volatile"),value:l.ksmtuned.status.volatile},null,8,["name","value"])]),(0,s.createElementVNode)("div",qt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.fullScans"),value:l.ksmtuned.status.fullScans},null,8,["name","value"])])]),(0,s.createElementVNode)("div",Jt,[(0,s.createElementVNode)("div",zt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.stableNodeDups"),value:l.ksmtuned.status.stableNodeDups},null,8,["name","value"])]),(0,s.createElementVNode)("div",Gt,[(0,s.createVNode)(n,{name:e.t("harvester.host.ksmtuned.statistics.stableNodeChains"),value:l.ksmtuned.status.stableNodeChains},null,8,["name","value"])])])])],64)):(0,s.createCommentVNode)("",!0)])}var Wt=a(27547),Yt={name:"HarvesterKsmtuned",components:{LabelValue:p.A},props:{mode:{type:String,required:!0},node:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await this.$store.dispatch(`${e}/findAll`,{type:B.rk.KSTUNED});this.ksmtuned=t.find((e=>e.id===this.node.id))},data(){return{ksmtuned:{}}},computed:{modeText(){const e=this.ksmtuned.spec.mode;return Wt.ksmtunedMode.find((t=>t.value===e)).label},thresCoef(){return`${this.ksmtuned.spec.thresCoef} %`},runText(){const e=this.ksmtuned.spec.run;return Wt.ksmtunedRunOption.find((t=>t.value===e)).label},showRunInformation(){return"run"===this.ksmtuned.spec.run},mergeNodesText(){return this.ksmtuned.spec?.mergeAcrossNodes?this.t("harvester.host.ksmtuned.enable"):this.t("harvester.host.ksmtuned.disable")},ksmdPhase(){return this.ksmtuned?.status?.ksmdPhase},ksmdPhaseTextColor(){return"Running"===this.ksmdPhase?"text-success":"text-warning"}}};const Xt=(0,ve.A)(Yt,[["render",Qt]]);var Zt=Xt;const ea={key:0},ta={key:1},aa={class:"row mb-20"},sa={class:"col span-6"},ra={class:"col span-6"},la={class:"row"},oa={class:"col span-6"},na={class:"col span-6"},ca={class:"row mt-20"},ia={class:"col span-6"},da={key:0,class:"col span-6"},ua={key:2,class:"row"},ma={class:"col span-6"};function va(e,t,a,r,l,o){const n=(0,s.resolveComponent)("Banner"),c=(0,s.resolveComponent)("LabelValue"),i=(0,s.resolveComponent)("RadioGroup");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[a.inventory.warningMessages.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("div",ea,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(a.inventory.warningMessages,((e,t)=>((0,s.openBlock)(),(0,s.createBlock)(n,{key:t,color:"error",label:e.text},null,8,["label"])))),128))])):(0,s.createCommentVNode)("",!0),l.enableInventory?((0,s.openBlock)(),(0,s.createElementBlock)("div",ta,[(0,s.createElementVNode)("div",aa,[(0,s.createElementVNode)("div",sa,[(0,s.createVNode)(c,{name:e.t("harvester.seeder.inventory.host.label"),value:l.value.spec.baseboardSpec.connection.host},null,8,["name","value"])]),(0,s.createElementVNode)("div",ra,[(0,s.createVNode)(c,{name:e.t("harvester.seeder.inventory.port.label"),value:l.value.spec.baseboardSpec.connection.port},null,8,["name","value"])])]),(0,s.createElementVNode)("div",la,[(0,s.createElementVNode)("div",oa,[(0,s.createVNode)(c,{name:e.t("harvester.seeder.inventory.insecureTLS.label"),value:l.value.spec.baseboardSpec.connection.insecureTLS?e.t("generic.yes"):e.t("generic.no")},null,8,["name","value"])]),(0,s.createElementVNode)("div",na,[(0,s.createVNode)(c,{name:e.t("harvester.seeder.inventory.secret.label"),value:o.selectedSecret},null,8,["name","value"])])]),(0,s.createElementVNode)("div",ca,[(0,s.createElementVNode)("div",ia,[(0,s.createVNode)(c,{name:e.t("harvester.seeder.inventory.event.label"),value:l.value.spec.events.enabled?e.t("generic.enabled"):e.t("generic.disabled")},null,8,["name","value"])]),l.value.spec.events.enabled?((0,s.openBlock)(),(0,s.createElementBlock)("div",da,[(0,s.createVNode)(c,{name:e.t("harvester.seeder.inventory.pollingInterval.label"),value:l.value.spec.events.pollingInterval},null,8,["name","value"])])):(0,s.createCommentVNode)("",!0)])])):((0,s.openBlock)(),(0,s.createElementBlock)("div",ua,[(0,s.createElementVNode)("div",ma,[(0,s.createVNode)(i,{value:l.enableInventory,"onUpdate:value":t[0]||(t[0]=e=>l.enableInventory=e),options:[{label:e.t("generic.enabled"),value:!0},{label:e.t("generic.disabled"),value:!1}],mode:a.mode,name:"enableInventory"},null,8,["value","options","mode"])])]))])}var pa={name:"HarvesterSeeder",components:{RadioGroup:ze.z,LabelValue:p.A,Banner:le.l},props:{mode:{type:String,required:!0},node:{type:Object,required:!0},inventory:{type:Object,required:!0}},data(){const e=!!this.inventory?.id;return{enableInventory:e,value:this.inventory}},computed:{selectedSecret(){const e=this.value.spec?.baseboardSpec?.connection?.authSecretRef?.namespace,t=this.value?.spec?.baseboardSpec?.connection?.authSecretRef?.name;return e&&t?`${e}/${t}`:"N/A"}}};const ha=(0,ve.A)(pa,[["render",va]]);var ka=ha;const ba="longhorn-system";var ya={name:"DetailHost",components:{Tabbed:u.A,Tab:m.A,Tag:d.A,Basic:he,Instance:Ee,ArrayListGrouped:h.A,Disk:We,InfoBox:v.A,VlanStatus:Vt,LabelValue:p.A,HarvesterKsmtuned:Zt,Loading:k.A,SortableTable:b.A,HarvesterSeeder:ka,Banner:y.A},mixins:[g.A],props:{value:{type:Object,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={nodes:this.$store.dispatch("harvester/findAll",{type:N.NW}),pods:this.$store.dispatch(`${e}/findAll`,{type:N.Sm})};this.$store.getters["harvester/schemaFor"](B.rk.VLAN_STATUS)&&(t.hostNetworks=this.$store.dispatch("harvester/findAll",{type:B.rk.VLAN_STATUS})),this.$store.getters["harvester/schemaFor"](B.rk.BLOCK_DEVICE)&&(t.blockDevices=this.$store.dispatch("harvester/findAll",{type:B.rk.BLOCK_DEVICE})),this.$store.getters["harvester/schemaFor"](N.oe.NODES)&&(t.longhornNodes=this.$store.dispatch("harvester/findAll",{type:N.oe.NODES})),this.$store.getters["harvester/schemaFor"](B.rk.LINK_MONITOR)&&(t.linkMonitors=this.$store.dispatch("harvester/findAll",{type:B.rk.LINK_MONITOR})),this.$store.getters["harvester/schemaFor"](B.rk.ADD_ONS)&&(t.addons=this.$store.dispatch(`${e}/findAll`,{type:B.rk.ADD_ONS})),this.$store.getters["harvester/schemaFor"](B.rk.INVENTORY)&&(t.inventories=this.$store.dispatch(`${e}/findAll`,{type:B.rk.INVENTORY}));const a=await(0,f.kR)(t),s=(a.hostNetworks||[]).find((e=>this.value.id===e.attachNodeName));this.loadMetrics(),s&&(this.hostNetworkResource=s);const r=this.$store.getters[`${e}/all`](B.rk.BLOCK_DEVICE),l=r.filter((e=>{const t=e?.spec?.nodeName===this.value.id,a=(0,C.jq)(this.longhornDisks,"name",e.metadata.name);return e?.isProvisioned&&t&&!a})).map((e=>({isNew:!0,name:e?.metadata?.name,originPath:e?.spec?.fileSystem?.mountPoint,path:e?.spec?.fileSystem?.mountPoint,blockDevice:e,displayName:e?.displayName,forceFormatted:e?.spec?.fileSystem?.forceFormatted||!1}))),o=[...this.longhornDisks,...l];this.disks=o,this.newDisks=(0,E.o8)(o);const n=this.$store.getters[`${e}/all`](B.rk.ADD_ONS),c=n.find((e=>"harvester-system/harvester-seeder"===e.id)),i=!!c&&c?.spec?.enabled;if(i){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](B.rk.INVENTORY)||[],a=t.find((e=>e.id===`harvester-system/${this.value.id}`));a?this.inventory=a:(this.inventory=await this.$store.dispatch(`${e}/create`,{type:B.rk.INVENTORY,metadata:{name:this.value.id,namespace:"harvester-system"}}),this.inventory.applyDefaults())}},data(){return{metrics:null,mode:"view",hostNetworkResource:null,newDisks:[],disks:[],allEvents:[],didLoadEvents:!1,inventory:{}}},computed:{...(0,i.L8)({t:"i18n/t"}),longhornDisks(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/byId`](N.oe.NODES,`longhorn-system/${this.value.id}`),a=t?.status?.diskStatus||{},s=t?.spec?.disks||{},r={increment:1024,minExponent:3,maxExponent:3,maxPrecision:2,suffix:"iB"},l=Object.keys(a).map((t=>{const l=this.$store.getters[`${e}/byId`](B.rk.BLOCK_DEVICE,`longhorn-system/${t}`);return{...a[t],...s?.[t],name:t,isNew:!1,storageReserved:(0,w.Mo)(s[t]?.storageReserved,r),storageAvailable:(0,w.Mo)(a[t]?.storageAvailable,r),storageMaximum:(0,w.Mo)(a[t]?.storageMaximum,r),storageScheduled:(0,w.Mo)(a[t]?.storageScheduled,r),blockDevice:l,displayName:l?.displayName||t,forceFormatted:l?.spec?.fileSystem?.forceFormatted||!1,tags:s?.[t]?.tags||[]}}));return l},hasKsmtunedSchema(){const e=this.$store.getters["currentProduct"].inStore;return!!this.$store.getters[`${e}/schemaFor`](B.rk.KSTUNED)},hasBlockDevicesSchema(){return!!this.$store.getters["harvester/schemaFor"](B.rk.BLOCK_DEVICE)},hasHostNetworksSchema(){return!!this.$store.getters["harvester/schemaFor"](B.rk.VLAN_STATUS)},vlanStatuses(){const e=this.$store.getters["currentProduct"].inStore,t=this.value.id,a=this.$store.getters[`${e}/all`](B.rk.VLAN_STATUS);return a.filter((e=>e?.status?.node===t))||[]},longhornNode(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](N.oe.NODES);return t.find((e=>e.id===`${ba}/${this.value.id}`))},events(){return this.allEvents.filter((e=>e.involvedObject?.uid===this.value?.metadata?.uid&&"SeederUpdated"!==e.reason)).map((e=>({reason:`${e.reason||this.t("generic.unknown")}${e.count>1?` (${e.count})`:""}`.trim(),message:e.message||this.t("generic.unknown"),date:e.lastTimestamp||e.firstTimestamp||e.metadata.creationTimestamp,eventType:e.eventType})))},eventHeaders(){return[{name:"reason",label:this.t("tableHeaders.reason"),value:"reason",sort:"reason"},{name:"message",label:this.t("tableHeaders.message"),value:"message",sort:"message"},{name:"date",label:this.t("tableHeaders.updated"),value:"date",sort:"date:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125}]},seederEnabled(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](B.rk.ADD_ONS),a=t.find((e=>"harvester-system/harvester-seeder"===e.id));return!!a&&a?.spec?.enabled},ntpSync(){const e=this.value.metadata?.annotations?.[V.r.NODE_NTP_SYNC_STATUS];let t=null;if(!e)return t;try{t=JSON.parse(e)}catch(a){this.$store.dispatch("growl/fromError",{title:this.t("generic.notification.title.error",{name:(0,S.ZD)(this.value.metadata.name)}),err:a},{root:!0})}return t},ntpSyncedStatus(){const e=this.ntpSync?.ntpSyncStatus;return"disabled"===e?{status:"disabled",warning:{key:"harvester.host.ntp.ntpSyncStatus.isDisabled"}}:"unsynced"===e?{status:"unsynced",warning:{key:"harvester.host.ntp.ntpSyncStatus.isUnsynced",current:this.ntpSync?.currentNtpServers?`<code>${this.ntpSync.currentNtpServers}</code>`:""}}:{}}},methods:{async loadMetrics(){const e=this.$store.getters["harvester/schemaFor"](N.$v.NODE);e&&(this.metrics=await this.$store.dispatch("harvester/find",{type:N.$v.NODE,id:this.value.id,opt:{force:!0,watch:!1}}),this.$forceUpdate())},tabChange(e){this.didLoadEvents||"events"!==e?.selectedName||this.$store.dispatch("harvester/findAll",{type:N.ll}).then((e=>{this.allEvents=e,this.didLoadEvents=!0}))}}};const ga=(0,ve.A)(ya,[["render",c]]);var Na=ga},39562:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(9274);const r={class:"mt-10"},l={class:"mt-10"};function o(e,t,a,o,n,c){const i=(0,s.resolveComponent)("Loading"),d=(0,s.resolveComponent)("CopyCode"),u=(0,s.resolveComponent)("Tab"),m=(0,s.resolveComponent)("ResourceTabs"),v=(0,s.resolveDirective)("clean-html");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(i,{key:0})):((0,s.openBlock)(),(0,s.createBlock)(m,{key:1,value:a.value,"default-tab":c.defaultTab,onInput:t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,s.withCtx)((()=>[c.showRegistration?((0,s.openBlock)(),(0,s.createBlock)(u,{key:0,name:"registration",label:e.t("cluster.tabs.registration"),weight:2,class:"p-10"},{default:(0,s.withCtx)((()=>[(0,s.withDirectives)((0,s.createElementVNode)("h4",null,null,512),[[v,e.t("cluster.harvester.registration.step1",null,!0)]]),(0,s.withDirectives)((0,s.createElementVNode)("h4",r,null,512),[[v,e.t("cluster.harvester.registration.step2",null,!0)]]),(0,s.withDirectives)((0,s.createElementVNode)("h4",l,null,512),[[v,e.t("cluster.harvester.registration.step3",null,!0)]]),(0,s.createVNode)(d,{class:"m-10 p-10"},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(c.registrationURL),1)])),_:1})])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["value","default-tab"]))}var n=a(84409),c=a(48377);function i(e,t,a,r,l,o){const n=(0,s.resolveDirective)("clean-tooltip");return(0,s.withDirectives)(((0,s.openBlock)(),(0,s.createElementBlock)("code",{class:"copy",onClick:t[0]||(t[0]=(0,s.withModifiers)(((...e)=>o.clicked&&o.clicked(...e)),["stop","prevent"]))},[(0,s.renderSlot)(e.$slots,"default",{},void 0,!0)])),[[n,o.tooltip]])}var d=a(68851),u=a(48881),m=a(99726);function v(e){return e.text?e.text:(0,d.cy)(e)?e.map(v).join(" "):e.children?(0,d.cy)(e.children)?e.children.map(v).join(" "):e.children:""}var p={emits:["copied","error"],data(){return{copied:!1}},methods:{clicked(e){e.stopPropagation(),e.preventDefault();const t=v(this.$slots.default()).trim();(0,u.e)(t).then((()=>{this.copied=!0,setTimeout((()=>{this.copied=!1}),2e3),this.$emit("copied")})).catch((e=>{this.$emit("error",(0,m.rz)(e))}))}},computed:{tooltip(){const e=this.copied?"Copied!":"Click to Copy";return{content:e,hideOnTargetClick:!1}}}},h=(a(25635),a(47433));const k=(0,h.A)(p,[["render",i],["__scopeId","data-v-2163c48c"]]);var b=k,y=a(49584),g=a(88339),N={emits:["input"],components:{Loading:n.A,ResourceTabs:c.A,Tab:y.A,CopyCode:b},props:{value:{type:Object,default:()=>({})}},async fetch(){await this.value.waitForProvisioner();const e={clusterToken:this.value.getOrCreateToken()},t=await(0,g.kR)(e);this.allNodes=t.allNodes||[],this.allNodePools=t.allNodePools||[],this.clusterToken=t.clusterToken},data(){return{clusterToken:null}},computed:{defaultTab(){return this.showRegistration&&!this.machines?.length?"registration":""},showRegistration(){return!!this.clusterToken&&(!!this.value.isImported&&!this.value.mgmt?.isReady)},registrationURL(){return(this.clusterToken?.command||"").replace("kubectl apply -f ","")}}};const V=(0,h.A)(N,[["render",o]]);var f=V},1948:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var s=a(9274);const r={class:"row"},l={class:"col span-6 mb-20"},o={class:"col span-6 mb-20"},n={class:"row"},c={class:"col span-6 mb-20"},i={class:"col span-6 mb-20"},d={class:"row"},u={class:"col span-6 mb-20"},m={class:"col span-6 mb-20"};function v(e,t,a,v,p,h){const k=(0,s.resolveComponent)("LabelValue"),b=(0,s.resolveComponent)("Tab"),y=(0,s.resolveComponent)("BackupList"),g=(0,s.resolveComponent)("SnapshotList"),N=(0,s.resolveComponent)("Tabbed");return(0,s.openBlock)(),(0,s.createBlock)(N,(0,s.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0}),{default:(0,s.withCtx)((()=>[(0,s.createVNode)(b,{name:"basic",label:e.t("harvester.virtualMachine.detail.tabs.basics"),class:"bordered-table",weight:99},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("div",l,[(0,s.createVNode)(k,{name:e.t("harvester.schedule.detail.namespace"),value:a.value.metadata.namespace},null,8,["name","value"])]),(0,s.createElementVNode)("div",o,[(0,s.createVNode)(k,{name:e.t("harvester.schedule.detail.sourceVM"),value:a.value.spec.vmbackup.source.name},null,8,["name","value"])])]),(0,s.createElementVNode)("div",n,[(0,s.createElementVNode)("div",c,[(0,s.createVNode)(k,{name:e.t("harvester.schedule.cron"),value:h.cronExpression},null,8,["name","value"])]),(0,s.createElementVNode)("div",i,[(0,s.createVNode)(k,{name:e.t("harvester.schedule.scheduleType"),value:a.value.spec.vmbackup.type},null,8,["name","value"])])]),(0,s.createElementVNode)("div",d,[(0,s.createElementVNode)("div",u,[(0,s.createVNode)(k,{name:e.t("harvester.schedule.retain.label"),value:a.value.spec.retain},null,8,["name","value"])]),(0,s.createElementVNode)("div",m,[(0,s.createVNode)(k,{name:e.t("harvester.schedule.maxFailure.label"),value:a.value.spec.maxFailure},null,8,["name","value"])])])])),_:1},8,["label"]),h.isBackup?((0,s.openBlock)(),(0,s.createBlock)(b,{key:0,name:"backups",label:e.t("harvester.schedule.tabs.backups"),weight:89,class:"bordered-table"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(y,{id:a.value.id},null,8,["id"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),h.isSnapshot?((0,s.openBlock)(),(0,s.createBlock)(b,{key:1,name:"snapshots",label:e.t("harvester.schedule.tabs.snapshots"),weight:79,class:"bordered-table"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(g,{id:a.value.id},null,8,["id"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0)])),_:1},16)}var p=a(39412),h=a(81594),k=a(49584),b=a(41837);const y={key:1};function g(e,t,a,r,l,o){const n=(0,s.resolveComponent)("router-link"),c=(0,s.resolveComponent)("ResourceTable");return(0,s.openBlock)(),(0,s.createBlock)(c,(0,s.mergeProps)(e.$attrs,{headers:o.headers,groupable:!1,rows:o.filteredRows,schema:l.schema,"key-field":"_key","default-sort-by":"age"}),{"col:name":(0,s.withCtx)((({row:e})=>[(0,s.createElementVNode)("td",null,[(0,s.createElementVNode)("span",null,[e?.status?.source?((0,s.openBlock)(),(0,s.createBlock)(n,{key:0,to:e.detailLocation},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,s.openBlock)(),(0,s.createElementBlock)("span",y,(0,s.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["headers","rows","schema"])}var N=a(81651),V=a(68774),f=a(5662),w=a(32766),C=a(2602),E={name:"BackupList",components:{ResourceTable:N.A},props:{id:{type:String,required:!0}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t=await(0,f.v)({backups:this.$store.dispatch(`${e}/findAll`,{type:w.rk.BACKUP})});this.rows=t.backups},data(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/schemaFor`](w.rk.BACKUP);return{rows:[],schema:t}},computed:{headers(){const e=[V.c4,{...V.o_,width:400},{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",sort:"attachVM",formatter:"AttachVMWithName"},{name:"backupTarget",labelKey:"tableHeaders.backupTarget",value:"backupTarget",sort:"backupTarget",align:"left",formatter:"HarvesterBackupTargetValidation"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",sort:"status.readyToUse",align:"center",formatter:"Checked"}];return this.hasBackupProgresses&&e.push({name:"backupProgress",labelKey:"tableHeaders.progress",value:"backupProgress",sort:"backupProgress",align:"left",formatter:"HarvesterBackupProgressBar"}),e.push(V.K),e},hasBackupProgresses(){return!!this.rows.find((e=>void 0!==e.status?.progress))},filteredRows(){let e=this.rows.filter((e=>e.spec?.type===b.a.BACKUP));return this.id&&(e=e.filter((e=>e.metadata.annotations?.[C.r.SVM_BACKUP_ID]===this.id))),e}}},S=a(47433);const B=(0,S.A)(E,[["render",g]]);var A=B;const T={key:1};function _(e,t,a,r,l,o){const n=(0,s.resolveComponent)("router-link"),c=(0,s.resolveComponent)("ResourceTable");return(0,s.openBlock)(),(0,s.createBlock)(c,(0,s.mergeProps)(e.$attrs,{headers:o.headers,groupable:!1,rows:o.filteredRows,schema:l.schema,"key-field":"_key","default-sort-by":"age"}),{"col:name":(0,s.withCtx)((({row:e})=>[(0,s.createElementVNode)("td",null,[(0,s.createElementVNode)("span",null,[e?.status?.source?((0,s.openBlock)(),(0,s.createBlock)(n,{key:0,to:e.detailLocation},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(e.nameDisplay),1)])),_:2},1032,["to"])):((0,s.openBlock)(),(0,s.createElementBlock)("span",T,(0,s.toDisplayString)(e.nameDisplay),1))])])])),_:1},16,["headers","rows","schema"])}var x=a(61117),M={name:"SnapshotList",components:{ResourceTable:N.A},props:{id:{type:String,required:!0}},async fetch(){const e=await(0,f.v)({backups:this.$store.dispatch("harvester/findAll",{type:w.rk.BACKUP})});this.rows=e.backups},data(){return{rows:[],schema:x.schema}},computed:{headers(){return[V.c4,V.o_,{name:"targetVM",labelKey:"tableHeaders.targetVm",value:"attachVM",align:"left",formatter:"AttachVMWithName"},{name:"readyToUse",labelKey:"tableHeaders.readyToUse",value:"status.readyToUse",align:"center",formatter:"Checked"},V.K]},filteredRows(){let e=this.rows.filter((e=>e.spec?.type===b.a.SNAPSHOT));return this.id&&(e=e.filter((e=>e.metadata.annotations?.[C.r.SVM_BACKUP_ID]===this.id))),e}}};const D=(0,S.A)(M,[["render",_]]);var $=D,O=a(37021),R=a.n(O),I={name:"ScheduleVmBackupDetail",components:{BackupList:A,SnapshotList:$,Tab:k.A,Tabbed:h.A,LabelValue:p.A},props:{value:{type:Object,required:!0}},computed:{isBackup(){return this.value.spec.vmbackup.type===b.a.BACKUP},isSnapshot(){return this.value.spec.vmbackup.type===b.a.SNAPSHOT},cronExpression(){let e="";try{e=R().toString(this.value.spec.cron,{verbose:!0})}catch(t){e=this.t("generic.invalidCron")}return e?`${this.value.spec.cron} (${e})`:this.value.spec.cron}}};a(27270);const L=(0,S.A)(I,[["render",v],["__scopeId","data-v-3a89cf31"]]);var P=L},84735:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return D}});var s=a(9274);const r={key:0,class:"row"},l={class:"col span-12"},o={class:"row mt-20"},n={class:"col span-6"},c={class:"col span-6"},i={key:1,class:"row"},d={class:"col span-6"},u={class:"col span-6"},m={key:2,class:"row"},v={class:"col span-6"},p={class:"col span-6"},h={key:3,class:"row"},k={class:"col span-6"},b={class:"col span-6"},y={key:4},g={key:0},N={class:"m-20 text-center"};function V(e,t,a,V,f,w){const C=(0,s.resolveComponent)("DetailText"),E=(0,s.resolveComponent)("Tab"),S=(0,s.resolveComponent)("ResourceTabs"),B=(0,s.resolveDirective)("t");return(0,s.openBlock)(),(0,s.createBlock)(S,{value:a.value,"need-events":!1,"need-related":!1,mode:e.mode,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(E,{name:"data",label:w.dataLabel},{default:(0,s.withCtx)((()=>[w.isRegistry||w.isBasicAuth?((0,s.openBlock)(),(0,s.createElementBlock)(s.Fragment,{key:0},[w.isRegistry?((0,s.openBlock)(),(0,s.createElementBlock)("div",r,[(0,s.createElementVNode)("div",l,[(0,s.createVNode)(C,{value:f.registryUrl,"label-key":"secret.registry.domainName"},null,8,["value"])])])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("div",o,[(0,s.createElementVNode)("div",n,[(0,s.createVNode)(C,{value:f.username,"label-key":"secret.registry.username"},null,8,["value"])]),(0,s.createElementVNode)("div",c,[(0,s.createVNode)(C,{value:f.password,"label-key":"secret.registry.password",conceal:!0},null,8,["value"])])])],64)):w.isCertificate?((0,s.openBlock)(),(0,s.createElementBlock)("div",i,[(0,s.createElementVNode)("div",d,[(0,s.createVNode)(C,{value:f.key,"label-key":"secret.certificate.privateKey",conceal:!0},null,8,["value"])]),(0,s.createElementVNode)("div",u,[(0,s.createVNode)(C,{value:f.crt,"label-key":"secret.certificate.certificate"},null,8,["value"])])])):w.isSvcAcctToken?((0,s.openBlock)(),(0,s.createElementBlock)("div",m,[(0,s.createElementVNode)("div",v,[(0,s.createVNode)(C,{value:f.crt,"label-key":"secret.serviceAcct.ca"},null,8,["value"])]),(0,s.createElementVNode)("div",p,[(0,s.createVNode)(C,{value:f.key,"label-key":"secret.serviceAcct.token",conceal:!0},null,8,["value"])])])):w.isSsh?((0,s.openBlock)(),(0,s.createElementBlock)("div",h,[(0,s.createElementVNode)("div",k,[(0,s.createVNode)(C,{value:f.username,"label-key":"secret.ssh.public"},null,8,["value"])]),(0,s.createElementVNode)("div",b,[(0,s.createVNode)(C,{value:f.password,"label-key":"secret.ssh.private",conceal:!0},null,8,["value"])])])):((0,s.openBlock)(),(0,s.createElementBlock)("div",y,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(w.parsedRows,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("div",{key:t,class:"entry"},[(0,s.createVNode)(C,{value:e.value,label:e.key,conceal:!0},null,8,["value","label"])])))),128)),w.parsedRows.length?(0,s.createCommentVNode)("",!0):((0,s.openBlock)(),(0,s.createElementBlock)("div",g,[(0,s.withDirectives)((0,s.createElementVNode)("div",N,null,512),[[B,"sortableTable.noRows"]])]))]))])),_:1},8,["label"])])),_:1},8,["value","mode"])}var f=a(24989),w=a(4514),C=a(91825),E=a(48377),S=a(87383),B=a(49584);const A=[f.J.OPAQUE,f.J.DOCKER_JSON,f.J.TLS,f.J.SSH,f.J.BASIC],T=["DockerHub","Quay.io","Artifactory","Custom"];var _={emits:["input"],components:{ResourceTabs:E.A,DetailText:S.A,Tab:B.A},mixins:[C.A],props:{value:{type:Object,default:()=>({})}},data(){let e,t,a,s,r,l="Custom";if(this.value._type===f.J.DOCKER_JSON){const s=(0,w.u)(this.value.data[".dockerconfigjson"]),{auths:r}=JSON.parse(s);a=Object.keys(r)[0],"index.docker.io/v1/"===a?l="DockerHub":"quay.io"===a?l="Quay.io":a.includes("artifactory")&&(l="Artifactory"),e=r[a].username,t=r[a].password}const o=this.value?.data||{};return this.value._type===f.J.TLS&&(s="edit"===this.mode?"":(0,w.u)(o["tls.key"]),r=(0,w.u)(o["tls.crt"])),this.value._type===f.J.SERVICE_ACCT&&(s=(0,w.u)(o["token"]),r=(0,w.u)(o["ca.crt"])),this.value._type===f.J.BASIC&&(e=(0,w.u)(o.username||""),t=(0,w.u)(o.password||"")),this.value._type===f.J.SSH&&(e=(0,w.u)(o["ssh-publickey"]||""),t=(0,w.u)(o["ssh-privatekey"]||"")),this.value._type||(this.value["_type"]=f.J.OPAQUE),{types:A,registryAddresses:T,registryProvider:l,username:e,password:t,registryUrl:a,key:s,crt:r,relatedServices:[]}},computed:{isCertificate(){return this.value._type===f.J.TLS},isSvcAcctToken(){return this.value._type===f.J.SERVICE_ACCT},isRegistry(){return this.value._type===f.J.DOCKER_JSON},isSsh(){return this.value._type===f.J.SSH},isBasicAuth(){return this.value._type===f.J.BASIC},parsedRows(){const e=[],{data:t={}}=this.value;return Object.keys(t).forEach((a=>{const s=(0,w.u)(t[a]);e.push({key:a,value:s})})),e},dataLabel(){switch(this.value._type){case f.J.TLS:return this.t("secret.certificate.certificate");case f.J.SSH:return this.t("secret.ssh.keys");case f.J.BASIC:return this.t("secret.authentication");default:return this.t("secret.data")}}}},x=(a(98326),a(47433));const M=(0,x.A)(_,[["render",V],["__scopeId","data-v-16758c8a"]]);var D=M},19509:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return I}});var s=a(9274);const r={class:"row"},l={class:"col span-6 mb-20"},o={class:"col span-6 mb-20"},n={class:"row"},c={class:"col span-6 mb-20"},i={class:"col span-6 mb-20"},d={class:"mb-20"},u={class:"row"},m={class:"col span-6 mb-20"},v={class:"col span-6 mb-20"},p={key:0},h={key:1},k=(0,s.createElementVNode)("div",{class:"spacer"},null,-1);function b(e,t,a,b,y,g){const N=(0,s.resolveComponent)("Loading"),V=(0,s.resolveComponent)("LabelValue"),f=(0,s.resolveComponent)("CpuMemory"),w=(0,s.resolveComponent)("Tab"),C=(0,s.resolveComponent)("Volume"),E=(0,s.resolveComponent)("Network"),S=(0,s.resolveComponent)("OverviewKeypairs"),B=(0,s.resolveComponent)("CloudConfig"),A=(0,s.resolveComponent)("Checkbox"),T=(0,s.resolveComponent)("Tabbed"),_=(0,s.resolveComponent)("CruResource");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(N,{key:0})):((0,s.openBlock)(),(0,s.createBlock)(_,{key:1,"done-route":e.doneRoute,resource:a.value,mode:a.mode,"apply-hooks":e.applyHooks},{default:(0,s.withCtx)((()=>[e.spec?((0,s.openBlock)(),(0,s.createBlock)(T,{key:0,"side-tabs":!0,onChanged:g.onTabChanged},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(w,{name:"Basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("div",l,[(0,s.createVNode)(V,{name:e.t("harvester.virtualMachine.detail.details.name"),value:g.name},null,8,["name","value"])]),(0,s.createElementVNode)("div",o,[(0,s.createVNode)(V,{name:e.t("harvester.fields.image"),value:g.imageName},null,8,["name","value"])])]),(0,s.createElementVNode)("div",n,[(0,s.createElementVNode)("div",c,[(0,s.createVNode)(V,{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:g.hostname},null,8,["name","value"])]),(0,s.createElementVNode)("div",i,[(0,s.createVNode)(V,{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType},null,8,["name","value"])])]),(0,s.createElementVNode)("div",d,[(0,s.createVNode)(f,{cpu:e.cpu,mode:a.mode,memory:e.memory},null,8,["cpu","mode","memory"])]),(0,s.createElementVNode)("div",u,[(0,s.createElementVNode)("div",m,[(0,s.createVNode)(V,{name:e.t("harvester.virtualMachine.detail.details.bootOrder")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(g.disks,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t},(0,s.toDisplayString)(e.bootOrder)+". "+(0,s.toDisplayString)(e.name)+" ("+(0,s.toDisplayString)(g.getDeviceType(e))+") ",1)))),128))])])])),_:1},8,["name"])]),(0,s.createElementVNode)("div",v,[(0,s.createVNode)(V,{name:e.t("harvester.virtualMachine.detail.details.CDROMs")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,[g.cdroms.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("ul",p,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(g.cdroms,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t},(0,s.toDisplayString)(e.name),1)))),128))])):((0,s.openBlock)(),(0,s.createElementBlock)("span",h,(0,s.toDisplayString)(e.t("harvester.virtualMachine.detail.notAvailable")),1))])])),_:1},8,["name"])])])])),_:1},8,["label"]),(0,s.createVNode)(w,{name:"volume",label:e.t("harvester.tab.volume"),weight:-1},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(C,{value:e.diskRows,"onUpdate:value":t[0]||(t[0]=t=>e.diskRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,s.createVNode)(w,{name:"network",label:e.t("harvester.tab.network"),weight:-2},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(E,{value:e.networkRows,"onUpdate:value":t[1]||(t[1]=t=>e.networkRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,s.createVNode)(w,{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),class:"bordered-table",weight:-3},{default:(0,s.withCtx)((()=>[y.vm?((0,s.openBlock)(),(0,s.createBlock)(S,{key:0,value:y.vm,"onUpdate:value":t[2]||(t[2]=e=>y.vm=e)},null,8,["value"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,s.createVNode)(w,{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-4},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(B,{ref:"yamlEditor","user-script":e.userScript,mode:a.mode,"network-script":e.networkScript},null,8,["user-script","mode","network-script"]),k,(0,s.createVNode)(A,{value:e.installUSBTablet,"onUpdate:value":t[3]||(t[3]=t=>e.installUSBTablet=t),mode:a.mode,class:"check",type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb")},null,8,["value","mode","label"])])),_:1},8,["label"])])),_:1},8,["onChanged"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["done-route","resource","mode","apply-hooks"]))}var y=a(81594),g=a(49584),N=a(84409),V=a(45778),f=a(42200),w=a(39412),C=a(88339),E=a(91825),S=a(48249),B=a(32766),A=a(75403),T=a(63536),_=a(83141),x=a(8746),M=a(81559);const D="n/a";var $={name:"BackupDetail",components:{Volume:_["default"],Network:x["default"],CruResource:V.A,Tabbed:y.A,Loading:N.A,LabelValue:w.A,Tab:g.A,CloudConfig:M["default"],Checkbox:f.S,CpuMemory:A["default"],OverviewKeypairs:T.A},mixins:[E.A,S.Ay],inheritAttrs:!1,props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){await(0,C.kR)({allImages:this.$store.dispatch("harvester/findAll",{type:B.rk.IMAGE})})},data(){return{vm:null}},computed:{name(){return this.value?.metadata?.name||D},hostname(){return this?.spec?.template?.spec?.hostname},imageName(){const e=this.$store.getters["harvester/all"](B.rk.IMAGE)||[],t=e.find((e=>this.imageId===e.id));return t?.spec?.displayName||"-"},disks(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.bootOrder)).sort(((e,t)=>e.bootOrder<t.bootOrder?-1:1))},cdroms(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.cdrom))}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length},onTabChanged({tab:e}){"advanced"===e.name&&this.$refs.yamlEditor?.refresh()}}},O=a(47433);const R=(0,O.A)($,[["render",b]]);var I=R},99144:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ae}});var s=a(9274);const r={class:"row"},l={class:"col span-12"},o={key:0},n={key:1},c={class:"row"},i={class:"col span-12"},d={class:"row"},u={class:"col span-12"},m={class:"row"},v={class:"col span-12"},p={class:"row"},h={class:"col span-12"},k={key:0,class:"row mb-20"},b={class:"col span-12"},y={class:"text-label"},g={key:1},N={key:2,class:"text-muted"},V={key:1,class:"row mb-20"},f={class:"col span-12"},w={class:"text-label"},C={key:1},E={key:2,class:"text-muted"},S={key:2,class:"row"},B={class:"col span-12"};function A(e,t,a,A,T,_){const x=(0,s.resolveComponent)("LabelValue"),M=(0,s.resolveComponent)("CopyToClipboardText"),D=(0,s.resolveComponent)("router-link"),$=(0,s.resolveComponent)("Tab"),O=(0,s.resolveComponent)("Storage"),R=(0,s.resolveComponent)("Tabbed");return(0,s.openBlock)(),(0,s.createBlock)(R,(0,s.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0}),{default:(0,s.withCtx)((()=>[(0,s.createVNode)($,{name:"detail",label:e.t("harvester.virtualMachine.detail.tabs.basics"),class:"bordered-table",weight:99},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("div",l,[_.isUpload?((0,s.openBlock)(),(0,s.createBlock)(x,{key:0,name:e.t("harvester.image.fileName"),value:_.imageName,class:"mb-20"},null,8,["name","value"])):((0,s.openBlock)(),(0,s.createBlock)(x,{key:1,name:e.t("harvester.image.url"),value:_.url,class:"mb-20"},{value:(0,s.withCtx)((()=>["-"!==_.url?((0,s.openBlock)(),(0,s.createElementBlock)("div",o,[(0,s.createVNode)(M,{text:_.url},null,8,["text"])])):((0,s.openBlock)(),(0,s.createElementBlock)("div",n,(0,s.toDisplayString)(_.url),1))])),_:1},8,["name","value"]))])]),(0,s.createElementVNode)("div",c,[(0,s.createElementVNode)("div",i,[(0,s.createVNode)(x,{name:e.t("harvester.image.size"),value:_.formattedValue,class:"mb-20"},null,8,["name","value"])])]),(0,s.createElementVNode)("div",d,[(0,s.createElementVNode)("div",u,[(0,s.createVNode)(x,{name:e.t("harvester.image.virtualSize"),value:_.virtualSize,class:"mb-20"},null,8,["name","value"])])]),(0,s.createElementVNode)("div",m,[(0,s.createElementVNode)("div",v,[(0,s.createVNode)(x,{name:e.t("nameNsDescription.description.label"),value:_.description,class:"mb-20"},null,8,["name","value"])])]),(0,s.createElementVNode)("div",p,[(0,s.createElementVNode)("div",h,[(0,s.createVNode)(x,{name:e.t("harvester.image.isEncryption"),value:_.isEncryptedString,class:"mb-20"},null,8,["name","value"])])]),a.value.volumeEncryptionFeatureEnabled&&a.value.isEncrypted?((0,s.openBlock)(),(0,s.createElementBlock)("div",k,[(0,s.createElementVNode)("div",b,[(0,s.createElementVNode)("div",y,(0,s.toDisplayString)(e.t("harvester.image.encryptionSecret")),1),_.encryptionSecret&&_.secretLink?((0,s.openBlock)(),(0,s.createBlock)(D,{key:0,to:_.secretLink},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(_.encryptionSecret),1)])),_:1},8,["to"])):_.encryptionSecret?((0,s.openBlock)(),(0,s.createElementBlock)("span",g,(0,s.toDisplayString)(_.encryptionSecret),1)):((0,s.openBlock)(),(0,s.createElementBlock)("span",N," — "))])])):(0,s.createCommentVNode)("",!0),a.value.volumeEncryptionFeatureEnabled&&_.isEncryptedOrDecrypted?((0,s.openBlock)(),(0,s.createElementBlock)("div",V,[(0,s.createElementVNode)("div",f,[(0,s.createElementVNode)("div",w,(0,s.toDisplayString)(e.t("harvester.image.sourceImage")),1),_.sourceImageId&&_.sourceImageLink?((0,s.openBlock)(),(0,s.createBlock)(D,{key:0,to:_.sourceImageLink},{default:(0,s.withCtx)((()=>[(0,s.createTextVNode)((0,s.toDisplayString)(_.sourceImageId),1)])),_:1},8,["to"])):_.sourceImageId?((0,s.openBlock)(),(0,s.createElementBlock)("span",C,(0,s.toDisplayString)(_.sourceImageId),1)):((0,s.openBlock)(),(0,s.createElementBlock)("span",E," — "))])])):(0,s.createCommentVNode)("",!0),"-"!==_.errorMessage?((0,s.openBlock)(),(0,s.createElementBlock)("div",S,[(0,s.createElementVNode)("div",B,[(0,s.createElementVNode)("div",null,(0,s.toDisplayString)(e.t("tableHeaders.message")),1),(0,s.createElementVNode)("div",{class:(0,s.normalizeClass)({error:"-"!==_.errorMessage})},(0,s.toDisplayString)(_.errorMessage),3)])])):(0,s.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,s.createVNode)($,{name:"storage",label:e.t("harvester.storage.label"),weight:89,class:"bordered-table"},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(O,{value:a.value.spec.storageClassParameters,"onUpdate:value":t[0]||(t[0]=e=>a.value.spec.storageClassParameters=e)},null,8,["value"])])),_:1},8,["label"])])),_:1},16)}var T=a(38076),_=a(39412),x=a(2841),M=a(2602),D=a(32766),$=a(81594),O=a(49584),R=a(68851),I=a(76978),L=a(92043);const P={key:0,class:"row mb-20"},U={class:"col span-12"},H={key:1,class:"row mb-20"},K={class:"col span-12"},j={class:"row mb-20"},F={class:"col span-6"},q={class:"col span-6"},J={class:"row mb-20"},z={class:"col span-6"};function G(e,t,a,r,l,o){const n=(0,s.resolveComponent)("LabelValue");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[a.value.nodeSelector?((0,s.openBlock)(),(0,s.createElementBlock)("div",P,[(0,s.createElementVNode)("div",U,[(0,s.createVNode)(n,{name:e.t("harvester.storage.nodeSelector.label"),value:a.value.nodeSelector},null,8,["name","value"])])])):(0,s.createCommentVNode)("",!0),a.value.diskSelector?((0,s.openBlock)(),(0,s.createElementBlock)("div",H,[(0,s.createElementVNode)("div",K,[(0,s.createVNode)(n,{name:e.t("harvester.storage.diskSelector.label"),value:a.value.diskSelector},null,8,["name","value"])])])):(0,s.createCommentVNode)("",!0),(0,s.createElementVNode)("div",j,[(0,s.createElementVNode)("div",F,[(0,s.createVNode)(n,{name:e.t("harvester.storage.migratable.label"),value:o.migratable},null,8,["name","value"])]),(0,s.createElementVNode)("div",q,[(0,s.createVNode)(n,{name:e.t("harvester.storage.numberOfReplicas.label"),value:a.value.numberOfReplicas},null,8,["name","value"])])]),(0,s.createElementVNode)("div",J,[(0,s.createElementVNode)("div",z,[(0,s.createVNode)(n,{name:e.t("harvester.storage.staleReplicaTimeout.label"),value:a.value.staleReplicaTimeout},null,8,["name","value"])])])])}var Q={props:{value:{type:Object,default:()=>{}}},components:{LabelValue:_.A},computed:{migratable(){return"true"===this.value.migratable?this.t("generic.yes"):this.t("generic.no")}}},W=a(47433);const Y=(0,W.A)(Q,[["render",G]]);var X=Y,Z=a(35664),ee={components:{CopyToClipboardText:T.A,Tab:O.A,Tabbed:$.A,LabelValue:_.A,Storage:X},props:{value:{type:Object,required:!0}},async fetch(){if(this.value.volumeEncryptionFeatureEnabled){const e=this.$store.getters["currentProduct"].inStore;this.secrets=await this.$store.dispatch(`${e}/findAll`,{type:Z.bB}),this.images=await this.$store.dispatch(`${e}/findAll`,{type:D.rk.IMAGE})}},data(){return{secrets:[],images:[]}},computed:{formattedValue(){return this.value?.downSize},virtualSize(){return this.value?.virtualSize},url(){return this.value?.spec?.url||"-"},description(){return this.value?.metadata?.annotations?.[x.tC]||"-"},errorMessage(){const e=(0,I.Jt)(this.value,"status.conditions");return(0,R.jq)(e,"type","Imported")?.message||"-"},isUpload(){return"upload"===this.value?.spec?.sourceType},sourceImage(){const{sourceImageName:e,sourceImageNamespace:t}=this.value?.spec?.securityParameters||{};if(t&&e){const a=`${t}/${e}`;return this.images.find((e=>e.id===a))}return null},sourceImageLink(){return this.sourceImage?.detailLocation},sourceImageId(){return this.sourceImage?this.sourceImage.displayNameWithNamespace:""},isEncryptedOrDecrypted(){return["encrypt","decrypt"].includes(this.value?.spec?.securityParameters?.cryptoOperation)},encryptionSecret(){return this.value.isEncrypted?this.value.encryptionSecret:"-"},secretLink(){return this.secrets.find((e=>e.id===this.value.encryptionSecret))?.detailLocation},isEncryptedString(){return(0,L.TF)(String(this.value.isEncrypted))},imageName(){return this.value?.metadata?.annotations?.[M.r.IMAGE_NAME]||"-"}}};a(5530);const te=(0,W.A)(ee,[["render",A],["__scopeId","data-v-327163e2"]]);var ae=te},97072:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return R}});var s=a(9274);const r={class:"row mb-10"},l={class:"col span-6"},o={class:"col span-6"},n={class:"row mb-10"},c={class:"col span-6"},i={class:"col span-6"},d={class:"row mb-10"},u={class:"col span-6"},m={class:"col span-6"},v={key:0},p={key:1},h=(0,s.createElementVNode)("div",{class:"spacer"},null,-1);function k(e,t,a,k,b,y){const g=(0,s.resolveComponent)("Loading"),N=(0,s.resolveComponent)("LabelValue"),V=(0,s.resolveComponent)("CpuMemory"),f=(0,s.resolveComponent)("Tab"),w=(0,s.resolveComponent)("Volume"),C=(0,s.resolveComponent)("Network"),E=(0,s.resolveComponent)("OverviewKeypairs"),S=(0,s.resolveComponent)("CloudConfig"),B=(0,s.resolveComponent)("Checkbox"),A=(0,s.resolveComponent)("Tabbed"),T=(0,s.resolveComponent)("CruResource");return e.$fetchState.pending?((0,s.openBlock)(),(0,s.createBlock)(g,{key:0})):((0,s.openBlock)(),(0,s.createBlock)(T,{key:1,"done-route":e.doneRoute,resource:a.value,mode:a.mode,"apply-hooks":e.applyHooks},{default:(0,s.withCtx)((()=>[e.spec?((0,s.openBlock)(),(0,s.createBlock)(A,{key:0,"side-tabs":!0,onChanged:y.onTabChanged},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(f,{name:"Basics",label:e.t("harvester.virtualMachine.detail.tabs.basics")},{default:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",r,[(0,s.createElementVNode)("div",l,[(0,s.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.name"),value:y.name},null,8,["name","value"])]),(0,s.createElementVNode)("div",o,[(0,s.createVNode)(N,{name:e.t("harvester.fields.image"),value:y.imageName},null,8,["name","value"])])]),(0,s.createElementVNode)("div",n,[(0,s.createElementVNode)("div",c,[(0,s.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:y.hostname},null,8,["name","value"])]),(0,s.createElementVNode)("div",i,[(0,s.createVNode)(N,{name:e.t("harvester.virtualMachine.input.MachineType"),value:e.machineType},null,8,["name","value"])])]),(0,s.createVNode)(V,{cpu:e.cpu,mode:a.mode,memory:e.memory},null,8,["cpu","mode","memory"]),(0,s.createElementVNode)("div",d,[(0,s.createElementVNode)("div",u,[(0,s.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.bootOrder")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,[(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(y.disks,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t},(0,s.toDisplayString)(e.bootOrder)+". "+(0,s.toDisplayString)(e.name)+" ("+(0,s.toDisplayString)(y.getDeviceType(e))+") ",1)))),128))])])])),_:1},8,["name"])]),(0,s.createElementVNode)("div",m,[(0,s.createVNode)(N,{name:e.t("harvester.virtualMachine.detail.details.CDROMs")},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,[y.cdroms.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("ul",v,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(y.cdroms,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t},(0,s.toDisplayString)(e.name),1)))),128))])):((0,s.openBlock)(),(0,s.createElementBlock)("span",p,(0,s.toDisplayString)(e.t("harvester.virtualMachine.detail.notAvailable")),1))])])),_:1},8,["name"])])])])),_:1},8,["label"]),(0,s.createVNode)(f,{name:"volume",label:e.t("harvester.tab.volume"),weight:-1},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(w,{value:e.diskRows,"onUpdate:value":t[0]||(t[0]=t=>e.diskRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,s.createVNode)(f,{name:"network",label:e.t("harvester.tab.network"),weight:-2},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(C,{value:e.networkRows,"onUpdate:value":t[1]||(t[1]=t=>e.networkRows=t),mode:a.mode},null,8,["value","mode"])])),_:1},8,["label"]),(0,s.createVNode)(f,{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),class:"bordered-table",weight:-3},{default:(0,s.withCtx)((()=>[b.vm?((0,s.openBlock)(),(0,s.createBlock)(E,{key:0,value:b.vm,"onUpdate:value":t[2]||(t[2]=e=>b.vm=e)},null,8,["value"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["label"]),(0,s.createVNode)(f,{name:"advanced",label:e.t("harvester.tab.advanced"),weight:-4},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(S,{ref:"yamlEditor","user-script":e.userScript,mode:a.mode,"network-script":e.networkScript},null,8,["user-script","mode","network-script"]),h,(0,s.createVNode)(B,{value:e.installUSBTablet,"onUpdate:value":t[3]||(t[3]=t=>e.installUSBTablet=t),mode:a.mode,class:"check",type:"checkbox",label:e.t("harvester.virtualMachine.enableUsb")},null,8,["value","mode","label"])])),_:1},8,["label"])])),_:1},8,["onChanged"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["done-route","resource","mode","apply-hooks"]))}var b=a(81594),y=a(49584),g=a(84409),N=a(45778),V=a(42200),f=a(39412),w=a(88339),C=a(91825),E=a(48249),S=a(32766),B=a(75403),A=a(63536),T=a(83141),_=a(8746),x=a(81559);const M="n/a";var D={name:"VMSnapshotDetail",components:{Volume:T["default"],Network:_["default"],CruResource:N.A,Tabbed:b.A,Loading:g.A,LabelValue:f.A,Tab:y.A,CloudConfig:x["default"],Checkbox:V.S,CpuMemory:B["default"],OverviewKeypairs:A.A},mixins:[C.A,E.Ay],inheritAttrs:!1,props:{value:{type:Object,required:!0},mode:{type:String,required:!0}},async fetch(){await(0,w.kR)({allImages:this.$store.dispatch("harvester/findAll",{type:S.rk.IMAGE})})},data(){return{vm:null}},computed:{name(){return this.value?.metadata?.name||M},hostname(){return this?.spec?.template?.spec?.hostname},imageName(){const e=this.$store.getters["harvester/all"](S.rk.IMAGE)||[],t=e.find((e=>this.imageId===e.id));return t?.spec?.displayName||"-"},disks(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.bootOrder)).sort(((e,t)=>e.bootOrder<t.bootOrder?-1:1))},cdroms(){const e=this?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.cdrom))}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length},onTabChanged({tab:e}){"advanced"===e.name&&this.$refs.yamlEditor?.refresh()}}},$=a(47433);const O=(0,$.A)(D,[["render",k]]);var R=O},63536:function(e,t,a){"use strict";a.d(t,{A:function(){return w}});var s=a(9274);const r=e=>((0,s.pushScopeId)("data-v-67f09e09"),e=e(),(0,s.popScopeId)(),e),l={class:"overview-sshKeys"},o={class:"col span-4"},n={class:"col span-7 offset-1"},c={key:0,class:"key-display"},i=["onClick"],d=r((()=>(0,s.createElementVNode)("i",{class:"icon icon-x"},null,-1))),u=[d],m=["onClick"],v=r((()=>(0,s.createElementVNode)("i",{class:"icons icon-show"},null,-1)));function p(e,t,a,r,d,p){return(0,s.openBlock)(),(0,s.createElementBlock)("div",l,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(d.sshKeys,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("div",{key:t},[(0,s.createElementVNode)("div",o,(0,s.toDisplayString)(e.id),1),(0,s.createElementVNode)("div",n,[e.showKey?((0,s.openBlock)(),(0,s.createElementBlock)("div",c,[(0,s.createTextVNode)((0,s.toDisplayString)(e.publicKey)+" ",1),(0,s.createElementVNode)("button",{class:"btn btn-sm role-link hide-bar",onClick:e=>p.toggleShow(t)},u,8,i)])):((0,s.openBlock)(),(0,s.createElementBlock)("button",{key:1,class:"btn btn-sm role-link",onClick:e=>p.toggleShow(t)},[(0,s.createTextVNode)(" *******"),v],8,m))])])))),128))])}var h=a(8138),k=a.n(h),b=a(88339),y=a(32766),g=a(73975),N={mixins:[g.Ay],props:{value:{type:Object,required:!0}},async fetch(){const e=await(0,b.kR)({allSSHs:this.$store.dispatch("harvester/findAll",{type:y.rk.SSH})});this.allSSHs=e.allSSHs},data(){return{allSSHs:[],sshKeys:[]}},methods:{toggleShow(e){const t=this.sshKeys[e];this.sshKeys[e]={...t,showKey:!t.showKey}},getKeys(){return this.mergeAllSSHs(this.value?.spec)},isShow(e=""){const t=this.sshKeys.find((t=>t?.data?.id===e))||{};return t.showKey||!1}},watch:{allSSHs(e){const t=this.getKeys().map((e=>({id:e.id,publicKey:k()(e.data)?e.data:e.data?.spec?.publicKey,showKey:this.isShow(e.id)})));this["sshKeys"]=t}}},V=(a(66439),a(47433));const f=(0,V.A)(N,[["render",p],["__scopeId","data-v-67f09e09"]]);var w=f},59544:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Se}});var s=a(9274);function r(e,t,a,r,l,o){const n=(0,s.resolveComponent)("OverviewBasics"),c=(0,s.resolveComponent)("Tab"),i=(0,s.resolveComponent)("Volume"),d=(0,s.resolveComponent)("Network"),u=(0,s.resolveComponent)("OverviewKeypairs"),m=(0,s.resolveComponent)("LabelValue"),v=(0,s.resolveComponent)("DashboardMetrics"),p=(0,s.resolveComponent)("NodeScheduling"),h=(0,s.resolveComponent)("PodAffinity"),k=(0,s.resolveComponent)("AccessCredentials"),b=(0,s.resolveComponent)("CloudConfig"),y=(0,s.resolveComponent)("Events"),g=(0,s.resolveComponent)("Migration"),N=(0,s.resolveComponent)("KeyValue"),V=(0,s.resolveComponent)("Labels"),f=(0,s.resolveComponent)("Tabbed");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createVNode)(f,(0,s.mergeProps)(e.$attrs,{class:"mt-15","side-tabs":!0,onChanged:o.onTabChanged}),{default:(0,s.withCtx)((()=>[(0,s.createVNode)(c,{name:"basics",label:e.t("harvester.virtualMachine.detail.tabs.basics"),class:"bordered-table",weight:7},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{value:a.value,vmi:o.vmi,mode:"view"},null,8,["value","vmi"])])),_:1},8,["label"]),(0,s.createVNode)(c,{name:"disks",label:e.t("harvester.tab.volume"),class:"bordered-table",weight:6},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(i,{value:e.diskRows,"onUpdate:value":t[0]||(t[0]=t=>e.diskRows=t),mode:"view",namespace:a.value.metadata.namespace,vm:a.value,"resource-type":a.value.type},null,8,["value","namespace","vm","resource-type"])])),_:1},8,["label"]),(0,s.createVNode)(c,{name:"networks",label:e.t("harvester.virtualMachine.detail.tabs.networks"),class:"bordered-table",weight:5},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(d,{value:e.networkRows,"onUpdate:value":t[1]||(t[1]=t=>e.networkRows=t),mode:"view"},null,8,["value"])])),_:1},8,["label"]),(0,s.createVNode)(c,{name:"keypairs",label:e.t("harvester.virtualMachine.detail.tabs.keypairs"),class:"bordered-table",weight:4},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(u,{value:a.value},null,8,["value"])])),_:1},8,["label"]),l.hasResourceQuotaSchema?((0,s.openBlock)(),(0,s.createBlock)(c,{key:0,name:"quotas",label:e.t("harvester.tab.quotas"),weight:3},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(m,{name:e.t("harvester.snapshot.totalSnapshotSize"),value:o.totalSnapshotSize},null,8,["name","value"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),l.showVmMetrics?((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,name:"vm-metrics",label:e.t("harvester.virtualMachine.detail.tabs.metrics"),weight:2.5},{default:(0,s.withCtx)((e=>[e.active?((0,s.openBlock)(),(0,s.createBlock)(v,{key:0,"detail-url":l.VM_METRICS_DETAIL_URL,"graph-height":"550px","has-summary-and-detail":!1,vars:o.graphVars},null,8,["detail-url","vars"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["label","weight"])):(0,s.createCommentVNode)("",!0),(0,s.createVNode)(c,{name:"nodeScheduling",label:e.t("workload.container.titles.nodeScheduling"),weight:2.4},{default:(0,s.withCtx)((({active:t})=>[e.spec?((0,s.openBlock)(),(0,s.createBlock)(p,{key:t,mode:e.mode,value:e.spec.template.spec,nodes:e.nodesIdOptions},null,8,["mode","value","nodes"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["label","weight"]),(0,s.createVNode)(c,{label:e.t("harvester.tab.vmScheduling"),name:"vmScheduling",weight:2.3},{default:(0,s.withCtx)((({active:t})=>[e.spec?((0,s.openBlock)(),(0,s.createBlock)(h,{key:t,mode:e.mode,value:e.spec.template.spec,nodes:e.nodes,"all-namespaces-option-available":!0,namespaces:e.filteredNamespaces,"overwrite-labels":e.affinityLabels},null,8,["mode","value","nodes","namespaces","overwrite-labels"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["label","weight"]),(0,s.createVNode)(c,{label:e.t("harvester.tab.accessCredentials"),class:"bordered-table",name:"accessCredentials",weight:2.2},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(k,{mode:"view",value:e.accessCredentials,"resource-type":a.value},null,8,["value","resource-type"])])),_:1},8,["label","weight"]),(0,s.createVNode)(c,{name:"cloudConfig",label:e.t("harvester.virtualMachine.detail.tabs.cloudConfig"),class:"bordered-table",weight:2},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(b,{ref:"yamlEditor",mode:"view","user-script":e.userScript,"network-script":e.networkScript},null,8,["user-script","network-script"])])),_:1},8,["label"]),(0,s.createVNode)(c,{name:"event",label:e.t("harvester.virtualMachine.detail.tabs.events"),weight:1},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(y,{resource:o.vmi,events:o.events},null,8,["resource","events"])])),_:1},8,["label"]),(0,s.createVNode)(c,{name:"migration",label:e.t("harvester.virtualMachine.detail.tabs.migration")},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(g,{value:a.value,"vmi-resource":o.vmi},null,8,["value","vmi-resource"])])),_:1},8,["label"]),(0,s.createVNode)(c,{name:"instanceLabel",label:e.t("harvester.tab.instanceLabel"),weight:-99},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(V,{"default-container-class":"labels-and-annotations-container",value:a.value,mode:e.mode,"display-side-by-side":!1,"show-annotations":!1,"show-label-title":!1},{labels:(0,s.withCtx)((({toggler:r})=>[(0,s.createVNode)(N,{key:"labels",value:a.value.instanceLabels,"protected-keys":a.value.systemLabels||[],"toggle-filter":r,"add-label":e.t("labels.addLabel"),mode:e.mode,"read-allowed":!1,"value-can-be-empty":!0,"onUpdate:value":t[2]||(t[2]=e=>a.value.setInstanceLabels(e))},null,8,["value","protected-keys","toggle-filter","add-label","mode"])])),_:1},8,["value","mode"])])),_:1},8,["label"])])),_:1},16,["onChanged"])])}var l=a(65359),o=a(81594),n=a(49584),c=a(35664),i=a(91825),d=a(83030),u=a(88339),m=a(97348),v=a(76655),p=a(19413),h=a(39996),k=a(93484),b=a(39412),y=a(32766),g=a(48249),N=a(81559),V=a(83141),f=a(8746),w=a(60068);const C={class:"text-info"},E={key:0};function S(e,t,a,r,l,o){const n=(0,s.resolveComponent)("SortableTable");return(0,s.openBlock)(),(0,s.createBlock)(n,{rows:a.events,headers:l.eventHeaders,"key-field":"id",search:!1,"table-actions":!1,"row-actions":!1,paging:!0,"rows-per-page":10,"default-sort-by":"date"},{"cell:resource":(0,s.withCtx)((({row:e,value:t})=>[(0,s.createElementVNode)("div",C,(0,s.toDisplayString)(t),1),e.message?((0,s.openBlock)(),(0,s.createElementBlock)("div",E,(0,s.toDisplayString)(e.displayMessage),1)):(0,s.createCommentVNode)("",!0)])),_:1},8,["rows","headers"])}var B=a(68774),A=a(44138),T={name:"VirtualMachineEvents",components:{SortableTable:A.A},props:{events:{type:Array,required:!0}},data(){const e={...B.rh,canBeVariable:!0,width:180},t=[e,{name:"resource",label:"Resource",labelKey:"clusterIndexPage.sections.events.resource.label",value:"displayInvolvedObject",sort:["involvedObject.kind","involvedObject.name"],canBeVariable:!0},{align:"right",name:"date",label:"Date",labelKey:"clusterIndexPage.sections.events.date.label",value:"lastTimestamp",sort:"lastTimestamp:desc",formatter:"LiveDate",formatterOpts:{addSuffix:!0},width:125,defaultSort:!0}];return{eventHeaders:t}}},_=a(47433);const x=(0,_.A)(T,[["render",S]]);var M=x;const D={class:"row mb-20"},$={class:"col span-6"},O={class:"col span-6"},R={class:"row mb-20"},I={class:"col span-6"},L={class:"col span-6"};function P(e,t,a,r,l,o){const n=(0,s.resolveComponent)("LabelValue");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createElementVNode)("div",D,[(0,s.createElementVNode)("div",$,[(0,s.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.sourceNode"),value:o.sourceNode},null,8,["name","value"])]),(0,s.createElementVNode)("div",O,[(0,s.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.targetNode"),value:o.targetNode},null,8,["name","value"])])]),(0,s.createElementVNode)("div",R,[(0,s.createElementVNode)("div",I,[(0,s.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.started"),value:o.started},null,8,["name","value"])]),(0,s.createElementVNode)("div",L,[(0,s.createVNode)(n,{name:e.t("harvester.virtualMachine.detail.details.ended"),value:o.ended},null,8,["name","value"])])])])}var U={name:"VirtualMachineMigration",components:{LabelValue:b.A},props:{value:{type:Object,required:!0},vmiResource:{type:Object,required:!0,default:()=>({})}},data(){return{localResource:this.vmiResource}},computed:{migrationState(){return this.localResource?.status?.migrationState},sourceNode(){return this.migrationState?.sourceNode||"N/A"},targetNode(){return this.migrationState?.targetNode||"N/A"},started(){return this.migrationState?.startTimestamp||"N/A"},ended(){return this.migrationState?.endTimestamp||"N/A"},message(){return"N/A"}},watch:{vmiResource:{handler(e){this.localResource=e},deep:!0}}};const H=(0,_.A)(U,[["render",P]]);var K=H;const j=e=>((0,s.pushScopeId)("data-v-e27d81a6"),e=e(),(0,s.popScopeId)(),e),F={class:"overview-basics"},q={class:"row"},J={class:"col span-6"},z={class:"smart-row"},G={class:"console"},Q={class:"col span-6"},W={class:"row"},Y={class:"col span-6"},X={class:"col span-6"},Z={class:"row"},ee={class:"col span-6"},te={class:"col span-6"},ae=j((()=>(0,s.createElementVNode)("hr",{class:"section-divider"},null,-1))),se={class:"row"},re={class:"col span-6"},le={class:"col span-6"},oe={key:0},ne={key:1},ce={class:"row"},ie={class:"col span-6"},de={class:"row"},ue={class:"col span-6"},me={class:"col span-6"};function ve(e,t,a,r,l,o){const n=(0,s.resolveComponent)("VMConsoleBar"),c=(0,s.resolveComponent)("LabelValue"),i=(0,s.resolveComponent)("HarvesterIpAddress"),d=(0,s.resolveComponent)("InputOrDisplay");return(0,s.openBlock)(),(0,s.createElementBlock)("div",null,[(0,s.createVNode)(n,{"resource-type":a.value,class:"consoleBut"},null,8,["resource-type"]),(0,s.createElementVNode)("div",F,[(0,s.createElementVNode)("div",q,[(0,s.createElementVNode)("div",J,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.name"),value:a.value.nameDisplay},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",z,[(0,s.createElementVNode)("div",G,(0,s.toDisplayString)(a.value.nameDisplay),1)])])),_:1},8,["name","value"])]),(0,s.createElementVNode)("div",Q,[(0,s.createVNode)(c,{name:e.t("harvester.fields.image"),value:o.imageName},null,8,["name","value"])])]),(0,s.createElementVNode)("div",W,[(0,s.createElementVNode)("div",Y,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.hostname"),value:o.hostname},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,(0,s.toDisplayString)(o.hostname),1)])),_:1},8,["name","value"])]),(0,s.createElementVNode)("div",X,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.node"),value:o.node},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,(0,s.toDisplayString)(o.node),1)])),_:1},8,["name","value"])])]),(0,s.createElementVNode)("div",Z,[(0,s.createElementVNode)("div",ee,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.ipAddress")},{value:(0,s.withCtx)((()=>[(0,s.createVNode)(i,{value:a.value.id,"onUpdate:value":t[0]||(t[0]=e=>a.value.id=e),row:a.value},null,8,["value","row"])])),_:1},8,["name"])]),(0,s.createElementVNode)("div",te,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.created"),value:o.creationTimestamp},null,8,["name","value"])])]),ae,(0,s.createElementVNode)("h2",null,(0,s.toDisplayString)(e.t("harvester.virtualMachine.detail.tabs.configurations")),1),(0,s.createElementVNode)("div",se,[(0,s.createElementVNode)("div",re,[(0,s.createVNode)(d,{name:e.t("harvester.virtualMachine.detail.details.bootOrder"),value:o.disks,mode:a.mode},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("ul",null,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(o.disks,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t},(0,s.toDisplayString)(e.bootOrder)+". "+(0,s.toDisplayString)(e.name)+" ("+(0,s.toDisplayString)(o.getDeviceType(e))+") ",1)))),128))])])),_:1},8,["name","value","mode"])]),(0,s.createElementVNode)("div",le,[(0,s.createVNode)(d,{name:e.t("harvester.virtualMachine.detail.details.CDROMs"),value:o.cdroms,mode:a.mode},{value:(0,s.withCtx)((()=>[(0,s.createElementVNode)("div",null,[o.cdroms.length>0?((0,s.openBlock)(),(0,s.createElementBlock)("ul",oe,[((0,s.openBlock)(!0),(0,s.createElementBlock)(s.Fragment,null,(0,s.renderList)(o.cdroms,((e,t)=>((0,s.openBlock)(),(0,s.createElementBlock)("li",{key:t},(0,s.toDisplayString)(e.name),1)))),128))])):((0,s.openBlock)(),(0,s.createElementBlock)("span",ne,(0,s.toDisplayString)(e.t("harvester.virtualMachine.detail.notAvailable")),1))])])),_:1},8,["name","value","mode"])])]),(0,s.createElementVNode)("div",ce,[(0,s.createElementVNode)("div",ie,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.operatingSystem"),value:o.operatingSystem},null,8,["name","value"])]),(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.flavor"),value:o.flavor},null,8,["name","value"])]),(0,s.createElementVNode)("div",de,[(0,s.createElementVNode)("div",ue,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.detail.details.kernelRelease"),value:o.kernelRelease},null,8,["name","value"])]),(0,s.createElementVNode)("div",me,[(0,s.createVNode)(c,{name:e.t("harvester.virtualMachine.input.MachineType"),value:o.machineType},null,8,["name","value"])])])])])}var pe=a(60090),he=a(24423),ke=a(58784);const be="n/a";var ye={name:"VMDetailsBasics",components:{VMConsoleBar:ke.A,HarvesterIpAddress:he["default"],LabelValue:b.A,InputOrDisplay:pe.A},mixins:[i.A],props:{value:{type:Object,required:!0},vmi:{type:Object,required:!0,default:()=>({})},mode:{type:String,required:!0}},computed:{creationTimestamp(){const e=new Date(this.value?.metadata?.creationTimestamp);return e.getMonth?`${e.getMonth()+1}/${e.getDate()}/${e.getUTCFullYear()}`:be},node(){const e=this.vmi?.status?.nodeName||be;return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},hostname(){const e=this.vmi?.spec?.hostname||this.vmi?.status?.guestOSInfo?.hostname||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},imageName(){const e=this.$store.getters["harvester/all"](y.rk.IMAGE)||[],t=e.find((e=>this.value.rootImageId===e.id));return t?.spec?.displayName||"N/A"},disks(){const e=this.value?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.bootOrder)).sort(((e,t)=>e.bootOrder<t.bootOrder?-1:1))},cdroms(){const e=this.value?.spec?.template?.spec?.domain?.devices?.disks||[];return e.filter((e=>!!e.cdrom))},flavor(){const e=this.value?.spec?.template?.spec?.domain;return`${e.cpu?.cores} vCPU , ${e.resources?.limits?.memory} ${this.t("harvester.virtualMachine.input.memory")}`},kernelRelease(){const e=this.vmi?.status?.guestOSInfo?.kernelRelease||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},operatingSystem(){const e=this.vmi?.status?.guestOSInfo?.prettyName||this.t("harvester.virtualMachine.detail.GuestAgentNotInstalled");return this.isDown?this.t("harvester.virtualMachine.detail.details.down"):e},isDown(){return this.isEmpty(this.vmi)},machineType(){return this.value?.spec?.template?.spec?.domain?.machine?.type||void 0}},methods:{getDeviceType(e){return e.disk?"Disk":"CD-ROM"},isEmpty(e){return void 0!==e&&0===Object.keys(e).length}}};a(40152);const ge=(0,_.A)(ye,[["render",ve],["__scopeId","data-v-e27d81a6"]]);var Ne=ge,Ve=a(63536),fe=a(95799);const we="/api/v1/namespaces/cattle-monitoring-system/services/http:rancher-monitoring-grafana:80/proxy/d/harvester-vm-detail-1/vm-info-detail?orgId=1";var Ce={name:"VMIDetailsPage",components:{Tab:n.A,Tabbed:o.A,Events:M,OverviewBasics:Ne,LabelValue:b.A,Volume:V["default"],Network:f["default"],OverviewKeypairs:Ve.A,CloudConfig:N["default"],Migration:K,DashboardMetrics:d.A,AccessCredentials:w["default"],NodeScheduling:v.A,PodAffinity:p.A,KeyValue:h.A,Labels:k.A},mixins:[i.A,g.Ay],props:{value:{type:Object,required:!0}},data(){return{hasResourceQuotaSchema:!1,switchToCloud:!1,VM_METRICS_DETAIL_URL:we,showVmMetrics:!1}},async created(){const e=this.$store.getters["currentProduct"].inStore;this.hasResourceQuotaSchema=!!this.$store.getters[`${e}/schemaFor`](y.rk.RESOURCE_QUOTA);const t={pods:this.$store.dispatch(`${e}/findAll`,{type:c.Sm}),services:this.$store.dispatch(`${e}/findAll`,{type:c.YV}),events:this.$store.dispatch(`${e}/findAll`,{type:c.ll}),allSSHs:this.$store.dispatch(`${e}/findAll`,{type:y.rk.SSH}),vmis:this.$store.dispatch(`${e}/findAll`,{type:y.rk.VMI}),restore:this.$store.dispatch(`${e}/findAll`,{type:y.rk.RESTORE})};this.hasResourceQuotaSchema&&(t.resourceQuotas=this.$store.dispatch(`${e}/findAll`,{type:y.rk.RESOURCE_QUOTA})),await(0,u.kR)(t),(0,u.DD)((0,m.Qr)(this.$store,this.currentCluster.id,[we],"harvester"),this,"showVmMetrics","Determine vm metrics")},computed:{...(0,l.L8)(["currentCluster"]),totalSnapshotSize(){return void 0===this.value.snapshotSizeQuota||null===this.value.snapshotSizeQuota?" - ":0===this.value.snapshotSizeQuota?"0":(0,fe.Mo)(this.value.snapshotSizeQuota,{increment:1024,addSuffix:!0,suffix:"i"})},vmi(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](y.rk.VMI)||[],a=t.find((e=>e?.metadata?.ownerReferences?.[0]?.uid===this.value?.metadata?.uid));return a},allEvents(){const e=this.$store.getters["currentProduct"].inStore;return this.$store.getters[`${e}/all`](c.ll)},events(){return this.allEvents.filter((e=>{const{name:t,creationTimestamp:a}=this.value?.metadata||{},s=this.value.podResource?.metadata?.name,r=this.value.persistentVolumeClaimName||[],l=e?.involvedObject?.name,o=r.find((e=>e===l));return(l===t||l===s||o)&&e.firstTimestamp>=a})).sort(((e,t)=>e.lastTimestamp>t.lastTimestamp?-1:1))},graphVars(){return{namespace:this.value.namespace,vm:this.value.name}}},methods:{onTabChanged({tab:e}){"cloudConfig"===e.name&&this.$refs.yamlEditor?.refresh()}},watch:{value:{handler(e){const t=this.getDiskRows(e);this["diskRows"]=t},deep:!0}}};const Ee=(0,_.A)(Ce,[["render",r]]);var Se=Ee},67973:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var s=a(9274);function r(e,t,a,r,l,o){const n=(0,s.resolveComponent)("SortableTable"),c=(0,s.resolveComponent)("Tab"),i=(0,s.resolveComponent)("ResourceTabs");return(0,s.openBlock)(),(0,s.createBlock)(i,{value:a.value,"need-related":!1,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(c,{name:"network","label-key":"harvester.ipPool.network.label",weight:99},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{"key-field":"_key",headers:o.networkHeaders,rows:o.networks,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1}),(0,s.createVNode)(c,{name:"range","label-key":"harvester.ipPool.tabs.range",weight:89},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{"key-field":"_key",headers:o.rangeHeaders,rows:o.ranges,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1})])),_:1},8,["value"])}var l=a(48377),o=a(49584),n=a(44138),c=a(35664),i=a(88339),d=a(9470),u={emits:["input"],components:{ResourceTabs:l.A,Tab:o.A,SortableTable:n.A},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(`${e}/findAll`,{type:c.XG})};await(0,i.kR)(t)},computed:{networks(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](c.XG);return t.filter((e=>e?.id===this.value?.spec?.selector?.network))},networkHeaders(){return d.NETWORK_HEADERS},ranges(){return this.value.spec.ranges},rangeHeaders(){return[{name:"subnet",label:this.t("harvester.ipPool.subnet.label"),value:"subnet"},{name:"gateway",label:this.t("harvester.ipPool.gateway.label"),value:"gateway"},{name:"startIP",label:this.t("harvester.ipPool.startIP.label"),value:"rangeStart"},{name:"endIP",label:this.t("harvester.ipPool.endIP.label"),value:"rangeEnd"}]}}},m=a(47433);const v=(0,m.A)(u,[["render",r]]);var p=v},55224:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(9274);function r(e,t,a,r,l,o){const n=(0,s.resolveComponent)("SortableTable"),c=(0,s.resolveComponent)("Tab"),i=(0,s.resolveComponent)("ResourceTabs");return(0,s.openBlock)(),(0,s.createBlock)(i,{value:a.value,"need-related":!1,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,s.withCtx)((()=>["pool"===a.value.spec.ipam?((0,s.openBlock)(),(0,s.createBlock)(c,{key:0,name:"ipPool","label-key":"harvester.loadBalancer.ipPool.label",weight:99},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{"key-field":"_key",headers:o.ipPoolHeaders,rows:o.ipPools,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1})):(0,s.createCommentVNode)("",!0),"vm"===a.value.spec.workloadType?((0,s.openBlock)(),(0,s.createBlock)(c,{key:1,name:"vm",label:e.t("harvester.loadBalancer.backendServers.label"),class:"bordered-table",weight:98},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{rows:o.vms,headers:o.vmHeaders,"key-field":"id","row-actions":!1,"table-actions":!1,search:o.vms.length>10},null,8,["rows","headers","search"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),"vm"===a.value.spec.workloadType?((0,s.openBlock)(),(0,s.createBlock)(c,{key:2,name:"listeners",label:e.t("harvester.loadBalancer.tabs.listeners"),class:"bordered-table",weight:89},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{"key-field":"_key",headers:o.listenerHeaders,rows:o.listeners,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0),"vm"===a.value.spec.workloadType?((0,s.openBlock)(),(0,s.createBlock)(c,{key:3,name:"selector",label:e.t("harvester.loadBalancer.tabs.backendServer"),class:"bordered-table",weight:79},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{"key-field":"_key",headers:o.serviceSelectorInfoHeaders,rows:o.backendServerSelectors,"row-actions":!1,"table-actions":!1,"show-headers":!0,search:!1},null,8,["headers","rows"])])),_:1},8,["label"])):(0,s.createCommentVNode)("",!0)])),_:1},8,["value"])}var l=a(48377),o=a(49584),n=a(44138),c=a(32766),i=a(88339),d=a(68774),u=a(29809),m=a(38823),v=a(62261),p={emits:["input"],components:{ResourceTabs:l.A,Tab:o.A,SortableTable:n.A},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore,t={ipPools:this.$store.dispatch(`${e}/findAll`,{type:c.rk.IP_POOL}),vms:this.$store.dispatch(`${e}/findAll`,{type:c.rk.VM})};await(0,i.kR)(t)},computed:{ipPools(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](c.rk.IP_POOL);return t.filter((e=>e.id===this.value.status.allocatedAddress.ipPool))},ipPoolHeaders(){return v.IP_POOL_HEADERS},listeners(){const e=this.value?.spec?.listeners;return e},listenerHeaders(){return[{name:"name",label:this.t("tableHeaders.name"),value:"name",sort:"name:desc"},{name:"port",label:this.t("tableHeaders.port"),value:"port",sort:"port:desc"},{name:"protocol",label:this.t("tableHeaders.protocol"),value:"protocol",sort:"protocol:desc"},{name:"backendPort",label:this.t("harvester.loadBalancer.listeners.backendPort.label"),value:"backendPort",sort:"backendPort:desc"}]},backendServerSelectors(){return Object.keys(this.value.spec?.backendServerSelector||{}).map((e=>({key:e,value:this.value.spec.backendServerSelector[e]})))},serviceSelectorInfoHeaders(){return[{...d._,width:200},d.Qg]},vmHeaders(){const e=["state","ip","node"];return u.VM_HEADERS.filter((t=>!e.includes(t.name)))},vms(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](c.rk.VM).filter((e=>e.metadata.namespace===this.value.metadata.namespace)),a=(0,m.wC)(t,this.value?.spec?.backendServerSelector,"spec.template.metadata.labels");return a}}},h=a(47433);const k=(0,h.A)(p,[["render",r]]);var b=k},27626:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(9274);function r(e,t,a,r,l,o){const n=(0,s.resolveComponent)("SortableTable"),c=(0,s.resolveComponent)("Tab"),i=(0,s.resolveComponent)("ResourceTabs");return(0,s.openBlock)(),(0,s.createBlock)(i,{value:a.value,"need-related":!1,"onUpdate:value":t[0]||(t[0]=t=>e.$emit("input",t))},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(c,{name:"node","label-key":"harvester.vlanConfig.titles.host",weight:99},{default:(0,s.withCtx)((()=>[(0,s.createVNode)(n,{"key-field":"_key",headers:o.nodeHeaders,rows:o.nodes,"row-actions":!1,"table-actions":!1,search:!1},null,8,["headers","rows"])])),_:1})])),_:1},8,["value"])}var l=a(48377),o=a(49584),n=a(44138),c=a(88339),i=a(68774),d=a(38823),u=a(35664),m=a(76978),v=a(2602),p={emits:["input"],components:{ResourceTabs:l.A,Tab:o.A,SortableTable:n.A},props:{value:{type:Object,default:()=>({})}},async fetch(){const e=this.$store.getters["currentProduct"].inStore;this.$store.dispatch("harvester/findAll",{type:u.NW});const t={nodes:this.$store.dispatch(`${e}/findAll`,{type:u.NW})};await(0,c.kR)(t)},computed:{nodeHeaders(){return[i.c4,i.o_,{name:"host-ip",labelKey:"tableHeaders.hostIp",search:["internalIp"],value:"internalIp",sort:["internalIp"]},i.K]},nodes(){const e=this.$store.getters["currentProduct"].inStore,t=this.$store.getters[`${e}/all`](u.NW),a=this.value?.metadata?.annotations?.[v.r.MATCHED_NODES],s=this.value?.spec?.nodeSelector;return(0,m.Im)(s)?a&&a.length>0?t.filter((e=>a.includes(e.id))):t:(0,d.wC)(t,s)}}},h=a(47433);const k=(0,h.A)(p,[["render",r]]);var b=k},44195:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".copy[data-v-2163c48c]{cursor:pointer}",""]),t["default"]=n},82398:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".copy-to-clipboard-text[data-v-d8c131ea]{white-space:nowrap}.copy-to-clipboard-text.plain[data-v-d8c131ea]{color:var(--body-text)}.copy-to-clipboard-text.plain[data-v-d8c131ea]:hover{text-decoration:none}.copy-to-clipboard-text.copied[data-v-d8c131ea]{pointer-events:none;color:var(--success)}",""]),t["default"]=n},27729:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".role[data-v-4ba6006f]{display:flex}",""]),t["default"]=n},37282:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".close[data-v-2f2890f0]{top:10px;right:10px;padding:0;position:absolute}.disk[data-v-2f2890f0]{position:relative}.disk .secret-name[data-v-2f2890f0]{height:61px}.disk[data-v-2f2890f0]:not(:last-of-type){padding-bottom:10px;margin-bottom:30px}.flex[data-v-2f2890f0]{display:flex;justify-content:space-between}.badge-state[data-v-2f2890f0]{padding:2px 5px}",""]),t["default"]=n},61696:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,"#host-instances[data-v-cfda1d06]  thead th{vertical-align:middle}#host-instances[data-v-cfda1d06]  .state{display:flex}#host-instances[data-v-cfda1d06]  .state .vmstate{margin-right:6px}",""]),t["default"]=n},72070:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".error[data-v-3a89cf31]{color:var(--error)}",""]),t["default"]=n},99318:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".entry[data-v-16758c8a]{margin-top:10px}.entry[data-v-16758c8a]:first-of-type{margin-top:0}",""]),t["default"]=n},63770:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".error[data-v-327163e2]{color:var(--error)}",""]),t["default"]=n},26648:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".consoleBut[data-v-e27d81a6]{display:flex;justify-content:flex-end}.overview-basics[data-v-e27d81a6]{display:grid;grid-template-columns:100%;grid-template-rows:auto;grid-row-gap:15px}.overview-basics .badge-state[data-v-e27d81a6]{padding:2px 5px;font-size:12px;margin-right:3px}.overview-basics .smart-row[data-v-e27d81a6]{display:flex;flex-direction:row}.overview-basics .smart-row .console[data-v-e27d81a6]{display:flex;overflow:hidden}.overview-basics__name[data-v-e27d81a6]{flex:1}.overview-basics__ssh-key[data-v-e27d81a6]{min-width:150px}",""]),t["default"]=n},62087:function(e,t,a){"use strict";a.r(t);var s=a(36758),r=a.n(s),l=a(40935),o=a.n(l),n=o()(r());n.push([e.id,".overview-sshKeys[data-v-67f09e09]{text-align:left;max-height:700px;overflow:auto}.overview-sshKeys__item[data-v-67f09e09]{margin-bottom:15px}.overview-sshKeys__item[data-v-67f09e09]:last-child{margin-bottom:0}.overview-sshKeys .key-display[data-v-67f09e09]{position:relative;padding-right:30px;word-break:break-word}.overview-sshKeys .key-display .hide-bar[data-v-67f09e09]{position:absolute;top:-10px;right:10px}",""]),t["default"]=n},25635:function(e,t,a){var s=a(44195);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("a9071e02",s,!0,{sourceMap:!1,shadowMode:!1})},48734:function(e,t,a){var s=a(82398);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("3ce8dc3a",s,!0,{sourceMap:!1,shadowMode:!1})},23857:function(e,t,a){var s=a(27729);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("0c700004",s,!0,{sourceMap:!1,shadowMode:!1})},91810:function(e,t,a){var s=a(37282);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("30b5bd84",s,!0,{sourceMap:!1,shadowMode:!1})},49600:function(e,t,a){var s=a(61696);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("638b66cc",s,!0,{sourceMap:!1,shadowMode:!1})},27270:function(e,t,a){var s=a(72070);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("c5f3af0a",s,!0,{sourceMap:!1,shadowMode:!1})},98326:function(e,t,a){var s=a(99318);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("33698eec",s,!0,{sourceMap:!1,shadowMode:!1})},5530:function(e,t,a){var s=a(63770);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("43932117",s,!0,{sourceMap:!1,shadowMode:!1})},40152:function(e,t,a){var s=a(26648);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("492a6099",s,!0,{sourceMap:!1,shadowMode:!1})},66439:function(e,t,a){var s=a(62087);s.__esModule&&(s=s.default),"string"===typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals);var r=a(74825).A;r("5043011e",s,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=harvester-1.0.1.umd.min.detail.js.map